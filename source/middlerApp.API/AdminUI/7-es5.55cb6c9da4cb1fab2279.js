!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{jz47:function(n,t,i){"use strict";i.r(t),i.d(t,"GlobalVariablesModule",function(){return bn});var r,c,l=i("ofXK"),d=i("tyNb"),s=i("fXoL"),u=i("mElL"),b=i("lJxs"),f=i("pLZG"),m=i("mW75"),p=function e(){a(this,e)},g=i("vkgz"),h=i("5+tZ"),v=i("IzEk"),x=i("eIep"),C=i("2Vo4"),P=function e(){a(this,e)},M=((r=function(){function e(n){var t=this;a(this,e),this.messages=n,this.rootNodeSubject$=new C.a(new p),this.rootNode$=this.rootNodeSubject$.asObservable(),this.SelectedFolderSubject$=new C.a(null),this.SelectedFolder$=this.SelectedFolderSubject$.asObservable(),this.SelectedFolderItemsSubject$=new C.a(null),this.SelectedFolderItems$=this.SelectedFolderItemsSubject$.asObservable(),this.messages.RunOnEveryReconnect(function(){return t.GetFolderTree().subscribe()}),this.messages.Stream("Variables.Subscribe").pipe(Object(g.a)(function(e){return console.log(e)}),Object(h.a)(function(e){return t.GetFolderTree()})).subscribe(),this.GetFolderTree().subscribe()}return o(e,[{key:"GetFolderTree",value:function(){var e=this;return this.messages.Invoke("Variables.GetFolderTree").pipe(Object(v.a)(1),Object(g.a)(function(n){console.log(n),e.rootNodeSubject$.next(n)}))}},{key:"GetVariablesInSelectedFolder",value:function(){var e=this;return this.messages.Invoke("Variables.GetVariablesInParent",this.SelectedFolderSubject$.getValue().Path).pipe(Object(v.a)(1),Object(g.a)(function(n){return e.SelectedFolderItemsSubject$.next(n)}))}},{key:"NewFolder",value:function(e,n){return console.log(e,n),this.messages.Invoke("Variables.NewFolder",e,n).pipe(Object(v.a)(1))}},{key:"RenameFolder",value:function(e,n,t){return this.messages.Invoke("Variables.RenameFolder",e,n,t).pipe(Object(v.a)(1))}},{key:"RemoveFolder",value:function(e,n){return this.messages.Invoke("Variables.RemoveFolder",e,n).pipe(Object(v.a)(1))}},{key:"GetVariable",value:function(e,n){return this.messages.Invoke("Variables.GetVariable",e,n).pipe(Object(v.a)(1))}},{key:"UpdateVariableContent",value:function(e,n,t){var o=this;return console.log("Variables.UpdateVariableContent",e,n,t),this.messages.Invoke("Variables.UpdateVariableContent",e,n,t).pipe(Object(v.a)(1),Object(x.a)(function(e){return o.GetVariablesInSelectedFolder()}))}},{key:"CreateVariable",value:function(e){var n=this;return this.messages.Invoke("Variables.CreateVariable",e).pipe(Object(v.a)(1),Object(x.a)(function(e){return n.GetVariablesInSelectedFolder()}))}},{key:"RemoveVariable",value:function(e,n){var t=this;return this.messages.Invoke("Variables.RemoveVariable",e,n).pipe(Object(v.a)(1),Object(x.a)(function(e){return t.GetVariablesInSelectedFolder()}))}},{key:"GetTypings",value:function(){return this.messages.Invoke("Variables.GetTypings").pipe(Object(v.a)(1))}},{key:"SetSelectedFolder",value:function(e){this.SelectedFolderSubject$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Zb(u.d))},r.\u0275prov=s.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),y=i("h0m+"),w=i("Nqz0"),O=i("B+r4"),k=i("1zMu"),V=i("C2AL"),S=i("FwiY"),_=i("6NWb"),F=i("t7qs"),z=i("ycP/"),U=i("3Pt+"),N=i("XNiG"),I=i("1G5W"),H=i("OzZK"),$=i("RwU8"),j=["*"],B=((c=function e(){a(this,e),this.ok=new s.n,this.cancel=new s.n}).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=s.Jb({type:c,selectors:[["basic-modal"]],hostAttrs:[1,"flex-grow-column"],inputs:{variable:"variable",form:"form"},outputs:{ok:"ok",cancel:"cancel"},ngContentSelectors:j,decls:17,vars:1,consts:[[1,"ui","top","attached","segment","modal-header",2,"padding","10px !important","display","flex"],[2,"color","whitesmoke","margin","auto"],[2,"font-size","2em","font-weight","bold","min-height","1.4285em","line-height","1.4285em","color","whitesmoke","margin","auto"],["dbPortal","VariableModalHeader-Left"],["left","dbPortal"],[2,"font-size","0.8em","line-height","initial","color","#bbbbbb"],["dbPortal","ModalSubHeader"],[2,"flex-grow","1"],[2,"display","flex","flex-direction","column","justify-content","center"],["dbPortal","VariableModalHeader-Right"],[1,"ui","attached","segment","modal-content"],[1,"ui","bottom","attached","segment","modal-footer",2,"margin-bottom","0px"],["nz-button","","nzType","primary","nzBlock","",2,"margin-right","1px",3,"disabled","click"],["nz-button","","nzType","default","nzBlock","",1,"secondary",2,"margin-left","1px",3,"click"]],template:function(e,n){1&e&&(s.mc(),s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Rb(3,3,4),s.Ub(),s.Vb(5,"div",5),s.Rb(6,6),s.Ub(),s.Ub(),s.Qb(7,"div",7),s.Vb(8,"div",8),s.Rb(9,9),s.Ub(),s.Ub(),s.Vb(10,"div",10),s.lc(11),s.Ub(),s.Vb(12,"div",11),s.Vb(13,"button",12),s.dc("click",function(){return n.ok.next()}),s.Hc(14,"Save"),s.Ub(),s.Vb(15,"button",13),s.dc("click",function(){return n.cancel.next()}),s.Hc(16,"Cancel"),s.Ub(),s.Ub()),2&e&&(s.Bb(13),s.nc("disabled",!n.form.valid))},directives:[F.d,H.a,$.a,V.a],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),c),D=i("ocnv"),G=i("PTRe");function A(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.form.value.Name," ")}}function E(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.variable.Parent," ")}}function T(e,n){1&e&&(s.Vb(0,"div",8),s.Vb(1,"nz-form-item"),s.Qb(2,"input",9),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.nc("dbAllowedCharacters","[a-zA-Z0-9_]"))}function R(e,n){if(1&e&&(s.Vb(0,"div"),s.Hc(1),s.Ub()),2&e){var t=s.gc();s.Bb(1),s.Jc(" ",t.error," ")}}var Q,J=((Q=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new N.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,U.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(I.a)(this.destroy$)).subscribe(function(e){o.context.invoke("changed",null)})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe(function(){e.context.handle.Close()})}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||Q)(s.Pb(U.e),s.Pb(y.d))},Q.\u0275cmp=s.Jb({type:Q,selectors:[["ng-component"]],decls:10,vars:5,consts:[[3,"variable","form","ok","cancel"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field",2,"flex-grow","1","display","flex","flex-direction","column"],["nz-input","","formControlName","Content"],[4,"ngIf"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Vb(0,"basic-modal",0),s.dc("ok",function(){return n.ok()})("cancel",function(){return n.cancel()}),s.Vb(1,"form",1),s.Fc(2,A,1,1,"ng-template",2),s.Fc(3,E,1,1,"ng-template",3),s.Fc(4,T,3,1,"div",4),s.Vb(5,"div",5),s.Vb(6,"label"),s.Hc(7,"Value"),s.Ub(),s.Qb(8,"input",6),s.Ub(),s.Fc(9,R,2,1,"div",7),s.Ub(),s.Ub()),2&e&&(s.nc("variable",n.variable)("form",n.form),s.Bb(1),s.nc("formGroup",n.form),s.Bb(3),s.nc("ngIf",n.create),s.Bb(5),s.nc("ngIf",n.error))},directives:[B,U.r,U.n,D.b,U.h,F.e,l.o,G.b,U.d,U.m,U.g,O.c,D.c,F.a,F.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),Q),L=i("jfkr"),W=i("zAKX");function q(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.form.value.Name," ")}}function Z(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.variable.Parent," ")}}function X(e,n){1&e&&(s.Vb(0,"div",8),s.Vb(1,"div",9),s.Hc(2," Type: "),s.Ub(),s.Vb(3,"div",10),s.Vb(4,"nz-select",11),s.Qb(5,"nz-option",12),s.Qb(6,"nz-option",13),s.Qb(7,"nz-option",14),s.Qb(8,"nz-option",15),s.Ub(),s.Ub(),s.Ub())}function K(e,n){1&e&&(s.Vb(0,"div",16),s.Vb(1,"nz-form-item"),s.Qb(2,"input",17),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.nc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var Y,ee=((Y=function(){function e(n,t){a(this,e),this.fb=n,this.context=t,this.variable=t.data,this.create=!!this.context.metaData.create,this.raw=!!this.context.metaData.raw,this.form=this.fb.group({Name:[null,U.q.required],Content:[],Extension:[],Language:[{value:null,disabled:!(this.create||this.raw)}]}),null==this.variable.Content?this.variable.Content="":"object"==typeof this.variable.Content||this.variable.Content instanceof Array?this.variable.Content=JSON.stringify(this.variable.Content):"string"!=typeof this.variable.Content&&(this.variable.Content="".concat(this.variable.Content)),this.form.patchValue(this.variable),this.form.get("Language").patchValue(this.getLanguage(this.variable.Extension))}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe(function(){e.context.handle.Close()})}},{key:"cancel",value:function(){this.context.handle.Close()}},{key:"getLanguage",value:function(e){return e?e.startsWith(".")?L.d.GetLanguageFromFileExtension(e)||"plaintext":e.toLowerCase():"plaintext"}}]),e}()).\u0275fac=function(e){return new(e||Y)(s.Pb(U.e),s.Pb(y.d))},Y.\u0275cmp=s.Jb({type:Y,selectors:[["ng-component"]],decls:8,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["dbPortalTemplate","VariableModalHeader-Right"],["class","required field",4,"ngIf"],[1,"field","flex-grow-column"],["formControlName","Content",3,"language"],[2,"display","flex"],[2,"padding-right","10px","margin","auto"],[2,"width","180px"],["formControlName","Language",2,"width","100%"],["nzLabel","Plaintext","nzValue","plaintext"],["nzLabel","Json","nzValue","json"],["nzLabel","Xml","nzValue","xml"],["nzLabel","Html","nzValue","html"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Vb(0,"basic-modal",0),s.dc("ok",function(){return n.ok()})("cancel",function(){return n.cancel()}),s.Vb(1,"form",1),s.Fc(2,q,1,1,"ng-template",2),s.Fc(3,Z,1,1,"ng-template",3),s.Fc(4,X,9,0,"ng-template",4),s.Fc(5,K,3,1,"div",5),s.Vb(6,"div",6),s.Qb(7,"db-editor",7),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.nc("variable",n.variable)("form",n.form),s.Bb(1),s.nc("formGroup",n.form),s.Bb(4),s.nc("ngIf",n.create),s.Bb(2),s.nc("language",n.form.value.Language))},directives:[B,U.r,U.n,U.h,F.e,l.o,L.a,U.m,U.g,W.b,W.a,O.c,D.c,G.b,U.d,F.a,F.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),Y);function ne(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.form.value.Name," ")}}function te(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.variable.Parent," ")}}function oe(e,n){1&e&&(s.Vb(0,"div",12),s.Vb(1,"nz-form-item"),s.Qb(2,"input",13),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.nc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var ae,ie=((ae=function(){function e(n,t){a(this,e),this.fb=n,this.context=t,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,U.q.required],Content:this.fb.group({UserName:[],Domain:[],Password:[]})}),this.form.patchValue(this.variable||{})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe(function(){e.context.handle.Close()})}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||ae)(s.Pb(U.e),s.Pb(y.d))},ae.\u0275cmp=s.Jb({type:ae,selectors:[["ng-component"]],decls:21,vars:5,consts:[[3,"variable","form","ok","cancel"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],["formGroupName","Content"],["nzRequired","","nzFor","Username",3,"nzSpan"],["nz-input","","formControlName","UserName","id","Username",2,"width","100%"],["nzSpan","5","nzFor","Domain"],["nz-input","","formControlName","Domain","id","Domain",2,"width","100%"],["nzSpan","5","nzRequired","","nzFor","Password"],["nz-input","","formControlName","Password","id","Password",2,"width","100%"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Vb(0,"basic-modal",0),s.dc("ok",function(){return n.ok()})("cancel",function(){return n.cancel()}),s.Vb(1,"form",1),s.Fc(2,ne,1,1,"ng-template",2),s.Fc(3,te,1,1,"ng-template",3),s.Fc(4,oe,3,1,"div",4),s.Vb(5,"div",5),s.Vb(6,"nz-form-item"),s.Vb(7,"nz-form-label",6),s.Hc(8,"Username"),s.Ub(),s.Vb(9,"nz-form-control"),s.Qb(10,"input",7),s.Ub(),s.Ub(),s.Vb(11,"nz-form-item"),s.Vb(12,"nz-form-label",8),s.Hc(13,"Domain"),s.Ub(),s.Vb(14,"nz-form-control"),s.Qb(15,"input",9),s.Ub(),s.Ub(),s.Vb(16,"nz-form-item"),s.Vb(17,"nz-form-label",10),s.Hc(18,"Password"),s.Ub(),s.Vb(19,"nz-form-control"),s.Qb(20,"input",11),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.nc("variable",n.variable)("form",n.form),s.Bb(1),s.nc("formGroup",n.form),s.Bb(3),s.nc("ngIf",n.create),s.Bb(3),s.nc("nzSpan",5))},directives:[B,U.r,U.n,D.b,U.h,F.e,l.o,U.i,O.c,D.c,O.a,D.d,D.a,G.b,U.d,U.m,U.g,F.a,F.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),ae),re=i("z4wI");function ce(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.form.value.Name," ")}}function le(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.variable.Parent," ")}}function de(e,n){1&e&&(s.Vb(0,"div",7),s.Vb(1,"nz-form-item"),s.Qb(2,"input",8),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.nc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var se,ue=((se=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new N.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,U.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(I.a)(this.destroy$)).subscribe(function(e){o.context.invoke("changed",null)})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe(function(){e.context.handle.Close()})}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||se)(s.Pb(U.e),s.Pb(y.d))},se.\u0275cmp=s.Jb({type:se,selectors:[["ng-component"]],decls:9,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field",2,"flex-grow","1","display","flex","flex-direction","column"],["formControlName","Content",2,"width","100%",3,"nzStep"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Vb(0,"basic-modal",0),s.dc("ok",function(){return n.ok()})("cancel",function(){return n.cancel()}),s.Vb(1,"form",1),s.Fc(2,ce,1,1,"ng-template",2),s.Fc(3,le,1,1,"ng-template",3),s.Fc(4,de,3,1,"div",4),s.Vb(5,"div",5),s.Vb(6,"label"),s.Hc(7,"Value"),s.Ub(),s.Qb(8,"nz-input-number",6),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.nc("variable",n.variable)("form",n.form),s.Bb(1),s.nc("formGroup",n.form),s.Bb(3),s.nc("ngIf",n.create),s.Bb(4),s.nc("nzStep",1))},directives:[B,U.r,U.n,U.h,F.e,l.o,re.a,U.m,U.g,O.c,D.c,G.b,U.d,F.a,F.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),se),be=i("TaO5");function fe(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.form.value.Name," ")}}function me(e,n){if(1&e&&s.Hc(0),2&e){var t=s.gc();s.Jc(" ",t.variable.Parent," ")}}function pe(e,n){1&e&&(s.Vb(0,"div",7),s.Vb(1,"nz-form-item"),s.Qb(2,"input",8),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.nc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var ge,he,ve=((he=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new N.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,U.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(I.a)(this.destroy$)).subscribe(function(e){o.context.invoke("changed",null)})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe(function(){e.context.handle.Close()})}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||he)(s.Pb(U.e),s.Pb(y.d))},he.\u0275cmp=s.Jb({type:he,selectors:[["ng-component"]],decls:8,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field"],["nz-checkbox","","formControlName","Content"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Vb(0,"basic-modal",0),s.dc("ok",function(){return n.ok()})("cancel",function(){return n.cancel()}),s.Vb(1,"form",1),s.Fc(2,fe,1,1,"ng-template",2),s.Fc(3,me,1,1,"ng-template",3),s.Fc(4,pe,3,1,"div",4),s.Vb(5,"div",5),s.Vb(6,"label",6),s.Hc(7),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.nc("variable",n.variable)("form",n.form),s.Bb(1),s.nc("formGroup",n.form),s.Bb(3),s.nc("ngIf",n.create),s.Bb(3),s.Jc("Value: ",n.form.value.Content||!1,""))},directives:[B,U.r,U.n,U.h,F.e,l.o,be.a,U.m,U.g,O.c,D.c,G.b,U.d,F.a,F.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),he),xe=((ge=function(){function e(n,t){a(this,e),this.modal=n,this.componentFactoryResolver=t,this.AvailabeModalTypes=[{type:ee,overlayConfig:{width:"80%",height:"90%"}}],this.ExtensionMapping={raw:ee,string:J,number:ue,boolean:ve,json:ee,credential:ie}}return o(e,[{key:"GetModal",value:function(e){var n=this.ExtensionMapping[e]||this.ExtensionMapping.raw,t=this.AvailabeModalTypes.find(function(e){return e.type===n})||{type:n,overlayConfig:{width:"50%",maxWidth:"500px"}};return this.modal.FromComponent(t.type).SetModalOptions({componentFactoryResolver:this.componentFactoryResolver,overlayConfig:t.overlayConfig}).CloseOnOutsideClick()}}]),e}()).\u0275fac=function(e){return new(e||ge)(s.Zb(y.b),s.Zb(s.j))},ge.\u0275prov=s.Lb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Ce=i("JIr8"),Pe=i("gwh1"),Me=i("Q8cG"),ye=i("gPmL"),we=["itemsContextMenu"],Oe=["viewportContextMenu"];function ke(e,n){if(1&e&&(s.Vb(0,"div",11),s.Hc(1),s.Ub()),2&e){var t=s.gc().$implicit;s.Bb(1),s.Jc(" ",t.First.Name," ")}}function Ve(e,n){if(1&e){var t=s.Wb();s.Vb(0,"li",9),s.dc("click",function(){s.yc(t);var e=s.gc().$implicit;return s.gc().OpenEditVariableModal(e.First)}),s.Qb(1,"db-icon",12),s.Hc(2," Edit "),s.Ub()}}function Se(e,n){if(1&e){var t=s.Wb();s.Vb(0,"li",9),s.dc("click",function(){s.yc(t);var e=s.gc().$implicit;return s.gc().RemoveVariable(e.SelectedData)}),s.Qb(1,"db-icon",13),s.Hc(2," Delete "),s.Ub()}}function _e(e,n){1&e&&s.Qb(0,"li",6)}function Fe(e,n){if(1&e){var t=s.Wb();s.Vb(0,"li",9),s.dc("click",function(){s.yc(t);var e=s.gc().$implicit;return s.gc().OpenEditVariableModal(e.First,!0)}),s.Hc(1," Edit Raw "),s.Ub()}}function ze(e,n){if(1&e){var t=s.Wb();s.Vb(0,"ul",3),s.Fc(1,ke,2,1,"div",4),s.Fc(2,Ve,3,0,"li",5),s.Fc(3,Se,3,0,"li",5),s.Qb(4,"li",6),s.Vb(5,"li",7),s.Vb(6,"ul",8),s.Vb(7,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("string")}),s.Hc(8,"String"),s.Ub(),s.Vb(9,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("number")}),s.Hc(10,"Number"),s.Ub(),s.Vb(11,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("boolean")}),s.Hc(12,"Boolean"),s.Ub(),s.Vb(13,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("credential")}),s.Hc(14,"Credential"),s.Ub(),s.Vb(15,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("raw")}),s.Hc(16,"Raw"),s.Ub(),s.Ub(),s.Ub(),s.Fc(17,_e,1,0,"li",10),s.Fc(18,Fe,2,0,"li",5),s.Ub()}if(2&e){var o=n.$implicit;s.Bb(1),s.nc("ngIf",o.Single),s.Bb(1),s.nc("ngIf",o.Single),s.Bb(1),s.nc("ngIf",o.Any),s.Bb(14),s.nc("ngIf",o.Single&&o.IsShiftPressed),s.Bb(1),s.nc("ngIf",o.Single&&o.IsShiftPressed)}}function Ue(e,n){if(1&e){var t=s.Wb();s.Vb(0,"ul",3),s.Vb(1,"li",7),s.Vb(2,"ul",8),s.Vb(3,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("string")}),s.Hc(4,"String"),s.Ub(),s.Vb(5,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("number")}),s.Hc(6,"Number"),s.Ub(),s.Vb(7,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("boolean")}),s.Hc(8,"Boolean"),s.Ub(),s.Vb(9,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("credential")}),s.Hc(10,"Credential"),s.Ub(),s.Vb(11,"li",9),s.dc("click",function(){return s.yc(t),s.gc().createVariable("raw")}),s.Hc(12,"Raw"),s.Ub(),s.Ub(),s.Ub(),s.Ub()}}var Ne,Ie=((Ne=function(){function e(n,t,o,i){var r=this;a(this,e),this.overlay=n,this.viewContainerRef=t,this.variables=o,this.modalService=i,this.grid=(new z.d).SetColumns(function(e){return e.Default("Name")},function(e){return e.Default("Extension").SetHeader("Type").SetValueFormatter(function(e){return e.value}).SetMinWidth(120).SetMaxWidth(120)},function(e){return e.Date("CreatedAt",!0).SetMinWidth(140).SetMaxWidth(140)},function(e){return e.Date("UpdatedAt",!0).SetMinWidth(140).SetMaxWidth(140)}).SetGridOptions({rowSelection:"multiple",colResizeDefault:"shift"}).OnCellContextMenu(function(e){var n=e.api.getSelectedNodes();0!=n.length&&n.includes(e.node)||e.api.selectNode(e.node);var t=new He(e.api,e.event);r.contextMenu=r.overlay.OpenContextMenu(e.event,r.itemsContextMenu,r.viewContainerRef,t)}).OnViewPortContextMenu(function(e,n){r.contextMenu=r.overlay.OpenContextMenu(e,r.viewportContextMenu,r.viewContainerRef,{})}).OnRowDoubleClicked(function(e){r.OpenEditVariableModal(e.data)}).OnGridSizeChange(function(e){return e.api.sizeColumnsToFit()})}return o(e,[{key:"Items",set:function(e){var n;null===(n=this.grid)||void 0===n||n.SetData(e)}},{key:"OpenEditVariableModal",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variables.GetVariable(e.Parent,e.Name).subscribe(function(o){n.modalService.GetModal(t?"raw":o.Extension).SetData(o).SetMetaData({raw:t}).AddEventHandler("ok",function(a){var i=a.payload.Content;if(t)switch(e.Extension){case"credential":i=JSON.parse(i)}return n.variables.UpdateVariableContent(o.Parent,o.Name,i).pipe(Object(Ce.a)(function(e){throw e}))}).Open()})}},{key:"createVariable",value:function(e){var n,t=this,o=new P;o.Parent=this.Path,this.modalService.GetModal(e).SetData(o).SetMetaData({create:!0}).OnClose(function(){t.nameAlreadyExistsErrorToast=null}).AddEventHandler("ok",function(n){var o=n.payload;return o.Parent=t.Path,o.Extension?o.Extension.startsWith(".")||(o.Extension=L.d.GetDefaultFileExtension(o.Extension)):o.Extension=e,t.variables.CreateVariable(o).pipe(Object(Ce.a)(function(e){throw e}))}).Open(),null===(n=this.contextMenu)||void 0===n||n.Close()}},{key:"RemoveVariable",value:function(e){var n=this;e.forEach(function(e){n.variables.RemoveVariable(e.Parent,e.Name).subscribe()}),this.contextMenu.Close()}}]),e}()).\u0275fac=function(e){return new(e||Ne)(s.Pb(y.c),s.Pb(s.Q),s.Pb(M),s.Pb(xe))},Ne.\u0275cmp=s.Jb({type:Ne,selectors:[["variables-folder-content"]],viewQuery:function(e,n){var t;1&e&&(s.Lc(we,1),s.Lc(Oe,1)),2&e&&(s.uc(t=s.ec())&&(n.itemsContextMenu=t.first),s.uc(t=s.ec())&&(n.viewportContextMenu=t.first))},hostAttrs:[1,""],inputs:{Items:"Items",Path:"Path"},features:[s.Ab([xe])],decls:5,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["viewportContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["class","context-menu-header",4,"ngIf"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider",""],["nz-submenu","","nzTitle","New Variable","nzIcon","field-binary"],[1,"context-menu"],["nz-menu-item","",3,"click"],["nz-menu-divider","",4,"ngIf"],[1,"context-menu-header"],["icon","edit"],["icon","delete"]],template:function(e,n){1&e&&(s.Qb(0,"ag-grid-angular",0),s.Fc(1,ze,19,5,"ng-template",null,1,s.Gc),s.Fc(3,Ue,13,0,"ng-template",null,2,s.Gc)),2&e&&s.nc("dbGrid",n.grid)},directives:[Pe.a,z.b,Me.c,l.o,Me.d,V.a,Me.g,Me.e,ye.c],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}"]}),Ne),He=function(){function e(n,t){a(this,e),this.mEvent=t,this.SelectedData=n.getSelectedNodes().map(function(e){return e.data})}return o(e,[{key:"SelectedCount",get:function(){return this.SelectedData.length}},{key:"Any",get:function(){return this.SelectedCount>0}},{key:"Single",get:function(){return 1===this.SelectedCount}},{key:"First",get:function(){return this.SelectedCount>0?this.SelectedData[0]:null}},{key:"IsShiftPressed",get:function(){return this.mEvent.shiftKey}}]),e}(),$e=["tree"],je=["folderContextMenu"],Be=function(){return["fas","angle-right"]};function De(e,n){1&e&&s.Qb(0,"fa-icon",25),2&e&&s.nc("icon",s.pc(1,Be))}var Ge=function(){return["fas","angle-down"]};function Ae(e,n){1&e&&s.Qb(0,"fa-icon",25),2&e&&s.nc("icon",s.pc(1,Ge))}function Ee(e,n){1&e&&s.Qb(0,"i",26)}function Te(e,n){1&e&&s.Qb(0,"i",27)}function Re(e,n){if(1&e){var t=s.Wb();s.Vb(0,"div",21),s.dc("click",function(e){s.yc(t);var n=s.gc().$implicit;return s.gc().clickFolderExpander(n,e)}),s.Fc(1,De,1,2,"fa-icon",22),s.Fc(2,Ae,1,2,"fa-icon",22),s.Fc(3,Ee,1,0,"i",23),s.Fc(4,Te,1,0,"i",24),s.Ub()}if(2&e){var o=s.gc().$implicit;s.Bb(1),s.nc("ngIf",!o.isExpanded),s.Bb(1),s.nc("ngIf",o.isExpanded),s.Bb(1),s.nc("ngIf",!o.isExpanded),s.Bb(1),s.nc("ngIf",o.isExpanded)}}function Qe(e,n){1&e&&s.Qb(0,"div",28)}function Je(e,n){if(1&e){var t=s.Wb();s.Vb(0,"div",29),s.Vb(1,"input",30,31),s.dc("keydown.enter",function(e){s.yc(t);var n=s.vc(2),o=s.gc().$implicit;return s.gc().saveName(o,n,e)})("keydown.escape",function(e){s.yc(t);var n=s.gc().$implicit;return s.gc().cancelCreateOrRenameFolder(n,e)})("focus",function(e){s.yc(t);var n=s.gc().$implicit;return s.gc().SelectIfCreateFolder(n,e)}),s.Ub(),s.Ub()}if(2&e){var o=s.gc().$implicit;s.Bb(1),s.nc("value",o.data.Name)("dbAllowedCharacters","[a-zA-Z0-9_]")}}function Le(e,n){if(1&e&&(s.Qb(0,"tree-node-content",32),s.hc(1,"async")),2&e){var t,o=s.gc(),a=o.$implicit,i=o.index,r=s.gc();s.Hb("selected",(null==(t=s.ic(1,4,r.variablesService.SelectedFolder$))?null:t.Path)==a.data.Path),s.nc("node",a)("index",i)}}function We(e,n){if(1&e&&(s.Vb(0,"div",14),s.dc("click",function(e){return n.$implicit.mouseAction("click",e)})("contextmenu",function(e){return n.$implicit.mouseAction("contextMenu",e)}),s.hc(1,"async"),s.Vb(2,"div",15),s.Fc(3,Re,5,4,"div",16),s.Fc(4,Qe,1,0,"div",17),s.Vb(5,"div",18),s.dc("dblclick",function(e){return n.$implicit.mouseAction("dblClick",e)})("contextmenu",function(e){return n.$implicit.mouseAction("contextMenu",e)})("treeDrop",function(e){return n.$implicit.onDrop(e)}),s.Fc(6,Je,3,2,"div",19),s.Fc(7,Le,2,6,"tree-node-content",20),s.Ub(),s.Ub(),s.Ub()),2&e){var t,o=n.$implicit,a=s.gc();s.Dc("padding-left",o.getNodePadding()),s.Hb("selected",(null==(t=s.ic(1,15,a.variablesService.SelectedFolder$))?null:t.Path)==o.data.Path),s.Bb(3),s.nc("ngIf",o.hasChildren),s.Bb(1),s.nc("ngIf",!o.hasChildren),s.Bb(1),s.Hb("node-content-wrapper-active",o.isActive)("node-content-wrapper-focused",o.isFocused),s.nc("treeAllowDrop",o.allowDrop)("treeDrag",o)("treeDragEnabled",o.allowDrag()),s.Bb(1),s.nc("ngIf",o.data.edit),s.Bb(1),s.nc("ngIf",!o.data.edit)}}function qe(e,n){if(1&e&&(s.Qb(0,"variables-folder-content",33),s.hc(1,"async")),2&e){var t=n.$implicit,o=s.gc();s.nc("Items",s.ic(1,2,o.ItemsInPath$))("Path",t)}}function Ze(e,n){1&e&&(s.Vb(0,"div",34),s.Hc(1," No Variables found in folder... "),s.Ub())}function Xe(e,n){if(1&e){var t=s.Wb();s.Vb(0,"li",37),s.dc("click",function(){s.yc(t);var e=s.gc().$implicit;return s.gc().RenameFolder(e.Node)}),s.Qb(1,"db-icon",40),s.Hc(2," Rename Folder "),s.Ub()}}function Ke(e,n){if(1&e){var t=s.Wb();s.Vb(0,"li",37),s.dc("click",function(){s.yc(t);var e=s.gc().$implicit;return s.gc().DeleteDirectory(e.Folder)}),s.Qb(1,"db-icon",41),s.Hc(2," Delete Folder "),s.Ub()}}function Ye(e,n){if(1&e){var t=s.Wb();s.Vb(0,"ul",35),s.Vb(1,"div",36),s.Hc(2),s.Ub(),s.Vb(3,"li",37),s.dc("click",function(){s.yc(t);var e=n.$implicit;return s.gc().CreateSubFolder(e.Node)}),s.Qb(4,"db-icon",38),s.Tb(5),s.Hc(6,"New Folder"),s.Sb(),s.Ub(),s.Fc(7,Xe,3,0,"li",39),s.Fc(8,Ke,3,0,"li",39),s.Ub()}if(2&e){var o=n.$implicit;s.Bb(2),s.Jc(" ",(null==o.Folder?null:o.Folder.Name)||"/"," "),s.Bb(5),s.nc("ngIf",o.Folder),s.Bb(1),s.nc("ngIf",o.Folder)}}var en,nn,tn,on,an,rn=function(){return[]},cn=((en=function(){function n(e,t,o,i,r,c){var l=this;a(this,n),this.ui=e,this.viewContainerRef=t,this.variablesService=o,this.cref=i,this.overlay=r,this.nzContextMenuService=c,this.nodes$=this.variablesService.rootNode$.pipe(Object(b.a)(function(e){return e.Children})),this.ItemsInPath$=this.variablesService.SelectedFolderItems$,this.SelectedFolderPath$=this.variablesService.SelectedFolder$.pipe(Object(f.a)(function(e){return!!e}),Object(b.a)(function(e){return e.Path})),this.actionMapping={mouse:{click:function(e,n,t){l.variablesService.SetSelectedFolder(n.data),l.variablesService.GetVariablesInSelectedFolder().subscribe()},dblClick:function(e,n,t){m.a.TOGGLE_EXPANDED(e,n,t)},contextMenu:function(e,n,t){t.preventDefault(),t.stopPropagation(),l.variablesService.SetSelectedFolder(n.data),l.openFolderContextMenu(t,n)}}},this.options={idField:"Path",displayField:"Name",childrenField:"Children",actionMapping:this.actionMapping,levelPadding:10},this.treeWidth=200,this.id=-1}return o(n,[{key:"FolderTreeState",get:function(){return this.variablesService.FolderTreeState},set:function(e){this.variablesService.FolderTreeState=e}},{key:"NormalizeTreeNode",value:function(e){var n=this,t=Object.assign(Object.assign({},e),{key:e.Path,title:e.Name,children:null});return e.Children?t.children=e.Children.map(function(e){return n.NormalizeTreeNode(e)}):t.isLeaf=!0,t}},{key:"clickTreeNode",value:function(e){console.log(e),this.variablesService.SetSelectedFolder(e.node.origin),this.variablesService.GetVariablesInSelectedFolder().subscribe()}},{key:"openFolderContextMenu",value:function(e,n){var t;null===(t=this.FolderContextMenu)||void 0===t||t.Close(),this.FolderContextMenu=this.overlay.OpenContextMenu(e,this.folderContextMenu,this.viewContainerRef,this.BuildContext(n))}},{key:"BuildContext",value:function(e){return{Node:e,Folder:null==e?void 0:e.data}}},{key:"clickFolderExpander",value:function(e,n){n.stopPropagation(),n.preventDefault(),this.CloseContextMenu(),e.toggleExpanded()}},{key:"CloseContextMenu",value:function(){var e;null===(e=this.FolderContextMenu)||void 0===e||e.Close()}},{key:"CreateSubFolder",value:function(n){var t=new p;t.Name="NewFolder",t.edit="create",n?(n.data.Children||(n.children=[],n.data.Children=[]),n.data.Children=[t].concat(e(n.data.Children))):this.tree.treeModel.nodes=[t].concat(e(this.tree.treeModel.nodes)),this.tree.treeModel.update(),this.CloseContextMenu(),this.cref.detectChanges(),n&&this.tree.treeModel.getNodeById(n.id).expand()}},{key:"saveName",value:function(e,n,t){var o,a;if(n.value){switch(e.data.edit){case"create":e.data.Name=n.value,this.variablesService.NewFolder("".concat((null===(o=e.realParent)||void 0===o?void 0:o.data.Parent)||"","/").concat((null===(a=e.realParent)||void 0===a?void 0:a.data.Name)||""),e.data.Name).subscribe();break;case"rename":console.log(e.data.Parent,e.data.Name,n.value),this.variablesService.RenameFolder(e.data.Parent,e.data.Name,n.value).subscribe(),e.data.Name=n.value,e.data.edit=null}e.data.edit=null,this.cref.detectChanges()}}},{key:"cancelCreateOrRenameFolder",value:function(e,n){switch(e.data.edit){case"create":e.realParent?e.realParent.data.Children=e.realParent.data.Children.filter(function(n){return n.Path!=e.data.Path}):this.tree.treeModel.nodes=this.tree.treeModel.nodes.filter(function(n){return n.Path!=e.data.Path}),this.tree.treeModel.update()}e.data.edit=null,this.cref.detectChanges()}},{key:"RenameFolder",value:function(e){e.data.edit="rename",this.CloseContextMenu(),this.cref.detectChanges()}},{key:"DeleteDirectory",value:function(e){this.variablesService.RemoveFolder(e.Parent,e.Name).subscribe(),this.CloseContextMenu()}},{key:"SelectIfCreateFolder",value:function(e,n){"create"===e.data.edit&&n.target.select(),e.parent.expand()}},{key:"contextMenu",value:function(e,n){this.nzContextMenuService.create(e,n)}},{key:"closeMenu",value:function(){this.nzContextMenuService.close()}},{key:"nzEvent",value:function(e){console.log(e)}},{key:"onResize",value:function(e){var n=this,t=e.width;cancelAnimationFrame(this.id),this.id=requestAnimationFrame(function(){n.treeWidth=t})}}]),n}()).\u0275fac=function(e){return new(e||en)(s.Pb(u.a),s.Pb(s.Q),s.Pb(M),s.Pb(s.h),s.Pb(y.c),s.Pb(w.a))},en.\u0275cmp=s.Jb({type:en,selectors:[["global-variables-explorer"]],viewQuery:function(e,n){var t;1&e&&(s.Lc($e,1),s.Lc(je,1)),2&e&&(s.uc(t=s.ec())&&(n.tree=t.first),s.uc(t=s.ec())&&(n.folderContextMenu=t.first))},decls:21,vars:14,consts:[["nz-row","",2,"flex-grow","1"],["nz-col","","nz-resizable","",1,"col",2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden","background-color","#d6d6d6","min-width","200px","height","100%",3,"nzResize"],["nzDirection","right",2,"background","#eaeaeb","width","4px","right","0px"],[1,"right-wrap"],["nz-icon","","nzType","more","nzTheme","outline",1,"right"],[2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden"],[2,"flex-grow","1","overflow","hidden",3,"state","nodes","options","stateChange","contextmenu"],["tree",""],["treeNodeWrapperTemplate",""],[1,"col","right",2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden","padding","4px 4px 4px 0px"],[2,"background-color","#292f3b","color","white","font-weight","bold","font-size","1.2rem","line-height","2rem","padding-left","14px"],[3,"Items","Path",4,"ngIf"],["empty",""],["folderContextMenu",""],["xaStopClickPropagation","",1,"node-wrapper",3,"click","contextmenu"],[2,"display","flex","flex-direction","row","padding-left","5px"],["class","expander-area","style","width: 20px; padding-left: 6px;",3,"click",4,"ngIf"],["style","width: 20px; padding-left: 6px;",4,"ngIf"],[1,"node-content-wrapper",3,"treeAllowDrop","treeDrag","treeDragEnabled","dblclick","contextmenu","treeDrop"],["class","ui input",4,"ngIf"],[3,"selected","node","index",4,"ngIf"],[1,"expander-area",2,"width","20px","padding-left","6px",3,"click"],["nz-icon","","style","margin-top:6px; width: 8px;",3,"icon",4,"ngIf"],["class","fitted angle right icon","style","padding-top:3px; width: 8px;",4,"ngIf"],["class","fitted angle down icon","style","padding-top:3px; width: 8px;",4,"ngIf"],["nz-icon","",2,"margin-top","6px","width","8px",3,"icon"],[1,"fitted","angle","right","icon",2,"padding-top","3px","width","8px"],[1,"fitted","angle","down","icon",2,"padding-top","3px","width","8px"],[2,"width","20px","padding-left","6px"],[1,"ui","input"],[2,"width","95%","padding","2px 5px",3,"value","dbSetFocus","dbAllowedCharacters","keydown.enter","keydown.escape","focus"],["nameinput",""],[3,"node","index"],[3,"Items","Path"],[1,"ui","header",2,"margin","auto","margin-top","10%","color","#969696"],["nz-menu","","nzMode","vertical",1,"context-menu"],[1,"context-menu-header"],["nz-menu-item","",3,"click"],["icon","folder"],["nz-menu-item","",3,"click",4,"ngIf"],["icon","edit"],["icon","delete"]],template:function(e,n){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.dc("nzResize",function(e){return n.onResize(e)}),s.Vb(2,"nz-resize-handle",2),s.Vb(3,"div",3),s.Qb(4,"i",4),s.Ub(),s.Ub(),s.Vb(5,"div",5),s.Vb(6,"tree-root",6,7),s.dc("stateChange",function(e){return n.FolderTreeState=e})("contextmenu",function(e){return n.openFolderContextMenu(e)}),s.hc(8,"async"),s.Fc(9,We,8,17,"ng-template",null,8,s.Gc),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"div",9),s.Vb(12,"div",10),s.Hc(13),s.hc(14,"async"),s.Ub(),s.Fc(15,qe,2,4,"variables-folder-content",11),s.hc(16,"async"),s.Ub(),s.Ub(),s.Fc(17,Ze,2,0,"ng-template",null,12,s.Gc),s.Fc(19,Ye,9,3,"ng-template",null,13,s.Gc)),2&e&&(s.Bb(1),s.Dc("width",n.treeWidth,"px"),s.Bb(5),s.nc("state",n.FolderTreeState)("nodes",s.ic(8,7,n.nodes$)||s.pc(13,rn))("options",n.options),s.Bb(7),s.Jc(" ",s.ic(14,9,n.SelectedFolderPath$),""),s.Bb(2),s.nc("ngIf",s.ic(16,11,n.SelectedFolderPath$)))},directives:[O.c,O.a,k.a,k.c,V.a,S.a,m.b,l.o,m.c,m.d,_.b,F.a,F.c,m.f,Ie,Me.c,Me.e,ye.c],pipes:[l.b],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;overflow:hidden}.right-wrap[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.node-content-wrapper[_ngcontent-%COMP%]{padding-left:0}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:none}.node-content-wrapper[_ngcontent-%COMP%]:hover{background:none}tree-node-content.selected[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 1px #fff}.node-wrapper[_ngcontent-%COMP%]{padding:.3em}.node-wrapper[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.node-wrapper.selected[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.node-wrapper.selected[_ngcontent-%COMP%]:hover{background-color:rgba(82,94,118,.8313725490196079);color:#fff}.expander-area[_ngcontent-%COMP%]:hover   .ng-fa-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px #525e76)}.node-wrapper.selected[_ngcontent-%COMP%]   .expander-area[_ngcontent-%COMP%]:hover   .ng-fa-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px white)}.folder-context[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}"],changeDetection:0}),en),ln=[{path:"",component:(nn=function e(n){a(this,e),this.uiService=n,n.Set(function(e){e.Header.Title="Global Variables",e.Content.Scrollable=!1,e.Content.Container=!1,e.Header.Icon="folder"})},nn.\u0275fac=function(e){return new(e||nn)(s.Pb(u.a))},nn.\u0275cmp=s.Jb({type:nn,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&s.Qb(0,"global-variables-explorer")},directives:[cn],styles:[""]}),nn)}],dn=((on=function e(){a(this,e)}).\u0275mod=s.Nb({type:on}),on.\u0275inj=s.Mb({factory:function(e){return new(e||on)},imports:[[d.l.forChild(ln)],d.l]}),on),sn=((tn=function e(){a(this,e)}).\u0275mod=s.Nb({type:tn}),tn.\u0275inj=s.Mb({factory:function(e){return new(e||tn)},imports:[[l.c,U.p,y.a,L.c,F.b,D.e,G.e,H.c,re.b,be.b,W.c]]}),tn),un=i("FG6W"),bn=((an=function e(){a(this,e)}).\u0275mod=s.Nb({type:an}),an.\u0275inj=s.Mb({factory:function(e){return new(e||an)},imports:[[l.c,U.p,dn,m.e,F.b,y.a,z.c,_.d,sn,un.a]]}),an)}}])}();
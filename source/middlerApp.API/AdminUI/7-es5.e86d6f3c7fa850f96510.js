!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{zvh3:function(n,t,i){"use strict";i.r(t),i.d(t,"GlobalVariablesModule",(function(){return bn}));var r,c,l=i("2kYt"),d=i("sEIs"),s=i("EM62"),u=i("ZF+8"),b=i("YtkY"),f=i("xVbo"),m=i("NWgr"),p=function e(){a(this,e)},h=i("8j5Y"),g=i("cJ9h"),v=i("J+dc"),C=i("TLy2"),x=i("C05f"),S=function e(){a(this,e)},M=((r=function(){function e(n){var t=this;a(this,e),this.messages=n,this.rootNodeSubject$=new x.a(new p),this.rootNode$=this.rootNodeSubject$.asObservable(),this.SelectedFolderSubject$=new x.a(null),this.SelectedFolder$=this.SelectedFolderSubject$.asObservable(),this.SelectedFolderItemsSubject$=new x.a(null),this.SelectedFolderItems$=this.SelectedFolderItemsSubject$.asObservable(),this.messages.RunOnEveryReconnect((function(){return t.GetFolderTree().subscribe()})),this.messages.Stream("Variables.Subscribe").pipe(Object(h.a)((function(e){return console.log(e)})),Object(g.b)((function(e){return t.GetFolderTree()}))).subscribe(),this.GetFolderTree().subscribe()}return o(e,[{key:"GetFolderTree",value:function(){var e=this;return this.messages.Invoke("Variables.GetFolderTree").pipe(Object(v.a)(1),Object(h.a)((function(n){console.log(n),e.rootNodeSubject$.next(n)})))}},{key:"GetVariablesInSelectedFolder",value:function(){var e=this;return this.messages.Invoke("Variables.GetVariablesInParent",this.SelectedFolderSubject$.getValue().Path).pipe(Object(v.a)(1),Object(h.a)((function(n){return e.SelectedFolderItemsSubject$.next(n)})))}},{key:"NewFolder",value:function(e,n){return console.log(e,n),this.messages.Invoke("Variables.NewFolder",e,n).pipe(Object(v.a)(1))}},{key:"RenameFolder",value:function(e,n,t){return this.messages.Invoke("Variables.RenameFolder",e,n,t).pipe(Object(v.a)(1))}},{key:"RemoveFolder",value:function(e,n){return this.messages.Invoke("Variables.RemoveFolder",e,n).pipe(Object(v.a)(1))}},{key:"GetVariable",value:function(e,n){return this.messages.Invoke("Variables.GetVariable",e,n).pipe(Object(v.a)(1))}},{key:"UpdateVariableContent",value:function(e,n,t){var o=this;return console.log("Variables.UpdateVariableContent",e,n,t),this.messages.Invoke("Variables.UpdateVariableContent",e,n,t).pipe(Object(v.a)(1),Object(C.a)((function(e){return o.GetVariablesInSelectedFolder()})))}},{key:"CreateVariable",value:function(e){var n=this;return this.messages.Invoke("Variables.CreateVariable",e).pipe(Object(v.a)(1),Object(C.a)((function(e){return n.GetVariablesInSelectedFolder()})))}},{key:"RemoveVariable",value:function(e,n){var t=this;return this.messages.Invoke("Variables.RemoveVariable",e,n).pipe(Object(v.a)(1),Object(C.a)((function(e){return t.GetVariablesInSelectedFolder()})))}},{key:"GetTypings",value:function(){return this.messages.Invoke("Variables.GetTypings").pipe(Object(v.a)(1))}},{key:"SetSelectedFolder",value:function(e){this.SelectedFolderSubject$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Xb(u.d))},r.\u0275prov=s.Jb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),O=i("5m6l"),w=i("B0q8"),P=i("Mr8s"),y=i("Fr0l"),k=i("1spV"),z=i("JbzU"),_=i("Pq5H"),T=i("l+TO"),N=i("aZpo"),F=i("nIj0"),I=i("ZTXN"),E=i("kuMc"),G=i("duTG"),V=i("ZTwM"),j=["*"],$=((c=function e(){a(this,e),this.ok=new s.n,this.cancel=new s.n}).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=s.Hb({type:c,selectors:[["basic-modal"]],hostAttrs:[1,"flex-grow-column"],inputs:{variable:"variable",form:"form"},outputs:{ok:"ok",cancel:"cancel"},ngContentSelectors:j,decls:17,vars:1,consts:[[1,"ui","top","attached","segment","modal-header",2,"padding","10px !important","display","flex"],[2,"color","whitesmoke","margin","auto"],[2,"font-size","2em","font-weight","bold","min-height","1.4285em","line-height","1.4285em","color","whitesmoke","margin","auto"],["dbPortal","VariableModalHeader-Left"],["left","dbPortal"],[2,"font-size","0.8em","line-height","initial","color","#bbbbbb"],["dbPortal","ModalSubHeader"],[2,"flex-grow","1"],[2,"display","flex","flex-direction","column","justify-content","center"],["dbPortal","VariableModalHeader-Right"],[1,"ui","attached","segment","modal-content"],[1,"ui","bottom","attached","segment","modal-footer",2,"margin-bottom","0px"],["nz-button","","nzType","primary","nzBlock","",2,"margin-right","1px",3,"disabled","click"],["nz-button","","nzType","default","nzBlock","",1,"secondary",2,"margin-left","1px",3,"click"]],template:function(e,n){1&e&&(s.kc(),s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Pb(3,3,4),s.Sb(),s.Tb(5,"div",5),s.Pb(6,6),s.Sb(),s.Sb(),s.Ob(7,"div",7),s.Tb(8,"div",8),s.Pb(9,9),s.Sb(),s.Sb(),s.Tb(10,"div",10),s.jc(11),s.Sb(),s.Tb(12,"div",11),s.Tb(13,"button",12),s.bc("click",(function(){return n.ok.next()})),s.Gc(14,"Save"),s.Sb(),s.Tb(15,"button",13),s.bc("click",(function(){return n.cancel.next()})),s.Gc(16,"Cancel"),s.Sb(),s.Sb()),2&e&&(s.zb(13),s.lc("disabled",!n.form.valid))},directives:[T.d,G.a,V.a,k.a],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),c),D=i("PlhU"),A=i("mybp");function R(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.form.value.Name," ")}}function H(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.variable.Parent," ")}}function U(e,n){1&e&&(s.Tb(0,"div",8),s.Tb(1,"nz-form-item"),s.Ob(2,"input",9),s.Sb(),s.Sb()),2&e&&(s.zb(2),s.lc("dbAllowedCharacters","[a-zA-Z0-9_]"))}function q(e,n){if(1&e&&(s.Tb(0,"div"),s.Gc(1),s.Sb()),2&e){var t=s.ec();s.zb(1),s.Ic(" ",t.error," ")}}var L,W=((L=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new I.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,F.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(E.a)(this.destroy$)).subscribe((function(e){o.context.invoke("changed",null)}))}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||L)(s.Nb(F.e),s.Nb(O.d))},L.\u0275cmp=s.Hb({type:L,selectors:[["ng-component"]],decls:10,vars:5,consts:[[3,"variable","form","ok","cancel"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field",2,"flex-grow","1","display","flex","flex-direction","column"],["nz-input","","formControlName","Content"],[4,"ngIf"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Tb(0,"basic-modal",0),s.bc("ok",(function(){return n.ok()}))("cancel",(function(){return n.cancel()})),s.Tb(1,"form",1),s.Ec(2,R,1,1,"ng-template",2),s.Ec(3,H,1,1,"ng-template",3),s.Ec(4,U,3,1,"div",4),s.Tb(5,"div",5),s.Tb(6,"label"),s.Gc(7,"Value"),s.Sb(),s.Ob(8,"input",6),s.Sb(),s.Ec(9,q,2,1,"div",7),s.Sb(),s.Sb()),2&e&&(s.lc("variable",n.variable)("form",n.form),s.zb(1),s.lc("formGroup",n.form),s.zb(3),s.lc("ngIf",n.create),s.zb(5),s.lc("ngIf",n.error))},directives:[$,F.r,F.n,D.b,F.h,T.e,l.o,A.b,F.d,F.m,F.g,P.c,D.c,T.a,T.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),L),Z=i("kZjU"),J=i("ox+w");function B(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.form.value.Name," ")}}function K(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.variable.Parent," ")}}function X(e,n){1&e&&(s.Tb(0,"div",8),s.Tb(1,"div",9),s.Gc(2," Type: "),s.Sb(),s.Tb(3,"div",10),s.Tb(4,"nz-select",11),s.Ob(5,"nz-option",12),s.Ob(6,"nz-option",13),s.Ob(7,"nz-option",14),s.Ob(8,"nz-option",15),s.Sb(),s.Sb(),s.Sb())}function Y(e,n){1&e&&(s.Tb(0,"div",16),s.Tb(1,"nz-form-item"),s.Ob(2,"input",17),s.Sb(),s.Sb()),2&e&&(s.zb(2),s.lc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var Q,ee=((Q=function(){function e(n,t){a(this,e),this.fb=n,this.context=t,this.variable=t.data,this.create=!!this.context.metaData.create,this.raw=!!this.context.metaData.raw,this.form=this.fb.group({Name:[null,F.q.required],Content:[],Extension:[],Language:[{value:null,disabled:!(this.create||this.raw)}]}),null==this.variable.Content?this.variable.Content="":"object"==typeof this.variable.Content||this.variable.Content instanceof Array?this.variable.Content=JSON.stringify(this.variable.Content):"string"!=typeof this.variable.Content&&(this.variable.Content=""+this.variable.Content),this.form.patchValue(this.variable),this.form.get("Language").patchValue(this.getLanguage(this.variable.Extension))}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}},{key:"getLanguage",value:function(e){return e?e.startsWith(".")?Z.d.GetLanguageFromFileExtension(e)||"plaintext":e.toLowerCase():"plaintext"}}]),e}()).\u0275fac=function(e){return new(e||Q)(s.Nb(F.e),s.Nb(O.d))},Q.\u0275cmp=s.Hb({type:Q,selectors:[["ng-component"]],decls:8,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["dbPortalTemplate","VariableModalHeader-Right"],["class","required field",4,"ngIf"],[1,"field","flex-grow-column"],["formControlName","Content",3,"language"],[2,"display","flex"],[2,"padding-right","10px","margin","auto"],[2,"width","180px"],["formControlName","Language",2,"width","100%"],["nzLabel","Plaintext","nzValue","plaintext"],["nzLabel","Json","nzValue","json"],["nzLabel","Xml","nzValue","xml"],["nzLabel","Html","nzValue","html"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Tb(0,"basic-modal",0),s.bc("ok",(function(){return n.ok()}))("cancel",(function(){return n.cancel()})),s.Tb(1,"form",1),s.Ec(2,B,1,1,"ng-template",2),s.Ec(3,K,1,1,"ng-template",3),s.Ec(4,X,9,0,"ng-template",4),s.Ec(5,Y,3,1,"div",5),s.Tb(6,"div",6),s.Ob(7,"db-editor",7),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.lc("variable",n.variable)("form",n.form),s.zb(1),s.lc("formGroup",n.form),s.zb(4),s.lc("ngIf",n.create),s.zb(2),s.lc("language",n.form.value.Language))},directives:[$,F.r,F.n,F.h,T.e,l.o,Z.a,F.m,F.g,J.b,J.a,P.c,D.c,A.b,F.d,T.a,T.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),Q);function ne(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.form.value.Name," ")}}function te(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.variable.Parent," ")}}function oe(e,n){1&e&&(s.Tb(0,"div",12),s.Tb(1,"nz-form-item"),s.Ob(2,"input",13),s.Sb(),s.Sb()),2&e&&(s.zb(2),s.lc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var ae,ie=((ae=function(){function e(n,t){a(this,e),this.fb=n,this.context=t,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,F.q.required],Content:this.fb.group({UserName:[],Domain:[],Password:[]})}),this.form.patchValue(this.variable||{})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||ae)(s.Nb(F.e),s.Nb(O.d))},ae.\u0275cmp=s.Hb({type:ae,selectors:[["ng-component"]],decls:21,vars:5,consts:[[3,"variable","form","ok","cancel"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],["formGroupName","Content"],["nzRequired","","nzFor","Username",3,"nzSpan"],["nz-input","","formControlName","UserName","id","Username",2,"width","100%"],["nzSpan","5","nzFor","Domain"],["nz-input","","formControlName","Domain","id","Domain",2,"width","100%"],["nzSpan","5","nzRequired","","nzFor","Password"],["nz-input","","formControlName","Password","id","Password",2,"width","100%"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Tb(0,"basic-modal",0),s.bc("ok",(function(){return n.ok()}))("cancel",(function(){return n.cancel()})),s.Tb(1,"form",1),s.Ec(2,ne,1,1,"ng-template",2),s.Ec(3,te,1,1,"ng-template",3),s.Ec(4,oe,3,1,"div",4),s.Tb(5,"div",5),s.Tb(6,"nz-form-item"),s.Tb(7,"nz-form-label",6),s.Gc(8,"Username"),s.Sb(),s.Tb(9,"nz-form-control"),s.Ob(10,"input",7),s.Sb(),s.Sb(),s.Tb(11,"nz-form-item"),s.Tb(12,"nz-form-label",8),s.Gc(13,"Domain"),s.Sb(),s.Tb(14,"nz-form-control"),s.Ob(15,"input",9),s.Sb(),s.Sb(),s.Tb(16,"nz-form-item"),s.Tb(17,"nz-form-label",10),s.Gc(18,"Password"),s.Sb(),s.Tb(19,"nz-form-control"),s.Ob(20,"input",11),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.lc("variable",n.variable)("form",n.form),s.zb(1),s.lc("formGroup",n.form),s.zb(3),s.lc("ngIf",n.create),s.zb(3),s.lc("nzSpan",5))},directives:[$,F.r,F.n,D.b,F.h,T.e,l.o,F.i,P.c,D.c,P.a,D.d,D.a,A.b,F.d,F.m,F.g,T.a,T.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),ae),re=i("rHEU");function ce(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.form.value.Name," ")}}function le(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.variable.Parent," ")}}function de(e,n){1&e&&(s.Tb(0,"div",7),s.Tb(1,"nz-form-item"),s.Ob(2,"input",8),s.Sb(),s.Sb()),2&e&&(s.zb(2),s.lc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var se,ue=((se=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new I.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,F.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(E.a)(this.destroy$)).subscribe((function(e){o.context.invoke("changed",null)}))}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||se)(s.Nb(F.e),s.Nb(O.d))},se.\u0275cmp=s.Hb({type:se,selectors:[["ng-component"]],decls:9,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field",2,"flex-grow","1","display","flex","flex-direction","column"],["formControlName","Content",2,"width","100%",3,"nzStep"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Tb(0,"basic-modal",0),s.bc("ok",(function(){return n.ok()}))("cancel",(function(){return n.cancel()})),s.Tb(1,"form",1),s.Ec(2,ce,1,1,"ng-template",2),s.Ec(3,le,1,1,"ng-template",3),s.Ec(4,de,3,1,"div",4),s.Tb(5,"div",5),s.Tb(6,"label"),s.Gc(7,"Value"),s.Sb(),s.Ob(8,"nz-input-number",6),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.lc("variable",n.variable)("form",n.form),s.zb(1),s.lc("formGroup",n.form),s.zb(3),s.lc("ngIf",n.create),s.zb(4),s.lc("nzStep",1))},directives:[$,F.r,F.n,F.h,T.e,l.o,re.a,F.m,F.g,P.c,D.c,A.b,F.d,T.a,T.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),se),be=i("MaY1");function fe(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.form.value.Name," ")}}function me(e,n){if(1&e&&s.Gc(0),2&e){var t=s.ec();s.Ic(" ",t.variable.Parent," ")}}function pe(e,n){1&e&&(s.Tb(0,"div",7),s.Tb(1,"nz-form-item"),s.Ob(2,"input",8),s.Sb(),s.Sb()),2&e&&(s.zb(2),s.lc("dbAllowedCharacters","[a-zA-Z0-9_]"))}var he,ge,ve=((ge=function(){function e(n,t){var o=this;a(this,e),this.fb=n,this.context=t,this.destroy$=new I.a,this.variable=t.data,this.create=!!this.context.metaData.create,this.form=this.fb.group({Name:[null,F.q.required],Content:[]}),this.form.patchValue(this.variable||{}),this.form.get("Name").valueChanges.pipe(Object(E.a)(this.destroy$)).subscribe((function(e){o.context.invoke("changed",null)}))}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||ge)(s.Nb(F.e),s.Nb(O.d))},ge.\u0275cmp=s.Hb({type:ge,selectors:[["ng-component"]],decls:8,vars:5,consts:[[3,"variable","form","ok","cancel"],[1,"ui","form",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["dbPortalTemplate","VariableModalHeader-Left"],["dbPortalTemplate","ModalSubHeader"],["class","required field",4,"ngIf"],[1,"field"],["nz-checkbox","","formControlName","Content"],[1,"required","field"],["nz-input","","formControlName","Name","placeholder","Variable Name",3,"dbAllowedCharacters","dbSetFocus"]],template:function(e,n){1&e&&(s.Tb(0,"basic-modal",0),s.bc("ok",(function(){return n.ok()}))("cancel",(function(){return n.cancel()})),s.Tb(1,"form",1),s.Ec(2,fe,1,1,"ng-template",2),s.Ec(3,me,1,1,"ng-template",3),s.Ec(4,pe,3,1,"div",4),s.Tb(5,"div",5),s.Tb(6,"label",6),s.Gc(7),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.lc("variable",n.variable)("form",n.form),s.zb(1),s.lc("formGroup",n.form),s.zb(3),s.lc("ngIf",n.create),s.zb(3),s.Ic("Value: ",n.form.value.Content||!1,""))},directives:[$,F.r,F.n,F.h,T.e,l.o,be.a,F.m,F.g,P.c,D.c,A.b,F.d,T.a,T.c],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}"]}),ge),Ce=((he=function(){function e(n,t){a(this,e),this.modal=n,this.componentFactoryResolver=t,this.AvailabeModalTypes=[{type:ee,overlayConfig:{width:"80%",height:"90%"}}],this.ExtensionMapping={raw:ee,string:W,number:ue,boolean:ve,json:ee,credential:ie}}return o(e,[{key:"GetModal",value:function(e){var n=this.ExtensionMapping[e]||this.ExtensionMapping.raw,t=this.AvailabeModalTypes.find((function(e){return e.type===n}))||{type:n,overlayConfig:{width:"50%",maxWidth:"500px"}};return this.modal.FromComponent(t.type).SetModalOptions({componentFactoryResolver:this.componentFactoryResolver,overlayConfig:t.overlayConfig}).CloseOnOutsideClick()}}]),e}()).\u0275fac=function(e){return new(e||he)(s.Xb(O.b),s.Xb(s.j))},he.\u0275prov=s.Jb({token:he,factory:he.\u0275fac,providedIn:"root"}),he),xe=i("4e/d"),Se=i("W6oE"),Me=i("XS/p"),Oe=i("2rm1"),we=["itemsContextMenu"],Pe=["viewportContextMenu"];function ye(e,n){if(1&e&&(s.Tb(0,"div",11),s.Gc(1),s.Sb()),2&e){var t=s.ec().$implicit;s.zb(1),s.Ic(" ",t.First.Name," ")}}function ke(e,n){if(1&e){var t=s.Ub();s.Tb(0,"li",9),s.bc("click",(function(){s.wc(t);var e=s.ec().$implicit;return s.ec().OpenEditVariableModal(e.First)})),s.Ob(1,"db-icon",12),s.Gc(2," Edit "),s.Sb()}}function ze(e,n){if(1&e){var t=s.Ub();s.Tb(0,"li",9),s.bc("click",(function(){s.wc(t);var e=s.ec().$implicit;return s.ec().RemoveVariable(e.SelectedData)})),s.Ob(1,"db-icon",13),s.Gc(2," Delete "),s.Sb()}}function _e(e,n){1&e&&s.Ob(0,"li",6)}function Te(e,n){if(1&e){var t=s.Ub();s.Tb(0,"li",9),s.bc("click",(function(){s.wc(t);var e=s.ec().$implicit;return s.ec().OpenEditVariableModal(e.First,!0)})),s.Gc(1," Edit Raw "),s.Sb()}}function Ne(e,n){if(1&e){var t=s.Ub();s.Tb(0,"ul",3),s.Ec(1,ye,2,1,"div",4),s.Ec(2,ke,3,0,"li",5),s.Ec(3,ze,3,0,"li",5),s.Ob(4,"li",6),s.Tb(5,"li",7),s.Tb(6,"ul",8),s.Tb(7,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("string")})),s.Gc(8,"String"),s.Sb(),s.Tb(9,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("number")})),s.Gc(10,"Number"),s.Sb(),s.Tb(11,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("boolean")})),s.Gc(12,"Boolean"),s.Sb(),s.Tb(13,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("credential")})),s.Gc(14,"Credential"),s.Sb(),s.Tb(15,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("raw")})),s.Gc(16,"Raw"),s.Sb(),s.Sb(),s.Sb(),s.Ec(17,_e,1,0,"li",10),s.Ec(18,Te,2,0,"li",5),s.Sb()}if(2&e){var o=n.$implicit;s.zb(1),s.lc("ngIf",o.Single),s.zb(1),s.lc("ngIf",o.Single),s.zb(1),s.lc("ngIf",o.Any),s.zb(14),s.lc("ngIf",o.Single&&o.IsShiftPressed),s.zb(1),s.lc("ngIf",o.Single&&o.IsShiftPressed)}}function Fe(e,n){if(1&e){var t=s.Ub();s.Tb(0,"ul",3),s.Tb(1,"li",7),s.Tb(2,"ul",8),s.Tb(3,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("string")})),s.Gc(4,"String"),s.Sb(),s.Tb(5,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("number")})),s.Gc(6,"Number"),s.Sb(),s.Tb(7,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("boolean")})),s.Gc(8,"Boolean"),s.Sb(),s.Tb(9,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("credential")})),s.Gc(10,"Credential"),s.Sb(),s.Tb(11,"li",9),s.bc("click",(function(){return s.wc(t),s.ec().createVariable("raw")})),s.Gc(12,"Raw"),s.Sb(),s.Sb(),s.Sb(),s.Sb()}}var Ie,Ee=((Ie=function(){function e(n,t,o,i){var r=this;a(this,e),this.overlay=n,this.viewContainerRef=t,this.variables=o,this.modalService=i,this.grid=(new N.d).SetColumns((function(e){return e.Default("Name")}),(function(e){return e.Default("Extension").SetHeader("Type").SetValueFormatter((function(e){return e.value})).SetMinWidth(120).SetMaxWidth(120)}),(function(e){return e.Date("CreatedAt",!0).SetMinWidth(140).SetMaxWidth(140)}),(function(e){return e.Date("UpdatedAt",!0).SetMinWidth(140).SetMaxWidth(140)})).SetGridOptions({rowSelection:"multiple",colResizeDefault:"shift"}).OnCellContextMenu((function(e){var n=e.api.getSelectedNodes();0!=n.length&&n.includes(e.node)||e.api.selectNode(e.node);var t=new Ge(e.api,e.event);r.contextMenu=r.overlay.OpenContextMenu(e.event,r.itemsContextMenu,r.viewContainerRef,t)})).OnViewPortContextMenu((function(e,n){r.contextMenu=r.overlay.OpenContextMenu(e,r.viewportContextMenu,r.viewContainerRef,{})})).OnRowDoubleClicked((function(e){r.OpenEditVariableModal(e.data)})).OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()}))}return o(e,[{key:"OpenEditVariableModal",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variables.GetVariable(e.Parent,e.Name).subscribe((function(o){n.modalService.GetModal(t?"raw":o.Extension).SetData(o).SetMetaData({raw:t}).AddEventHandler("ok",(function(a){var i=a.payload.Content;if(t)switch(e.Extension){case"credential":i=JSON.parse(i)}return n.variables.UpdateVariableContent(o.Parent,o.Name,i).pipe(Object(xe.a)((function(e){throw e})))})).Open()}))}},{key:"createVariable",value:function(e){var n,t=this,o=new S;o.Parent=this.Path,this.modalService.GetModal(e).SetData(o).SetMetaData({create:!0}).OnClose((function(){t.nameAlreadyExistsErrorToast=null})).AddEventHandler("ok",(function(n){var o=n.payload;return o.Parent=t.Path,o.Extension?o.Extension.startsWith(".")||(o.Extension=Z.d.GetDefaultFileExtension(o.Extension)):o.Extension=e,t.variables.CreateVariable(o).pipe(Object(xe.a)((function(e){throw e})))})).Open(),null===(n=this.contextMenu)||void 0===n||n.Close()}},{key:"RemoveVariable",value:function(e){var n=this;e.forEach((function(e){n.variables.RemoveVariable(e.Parent,e.Name).subscribe()})),this.contextMenu.Close()}},{key:"Items",set:function(e){var n;null===(n=this.grid)||void 0===n||n.SetData(e)}}]),e}()).\u0275fac=function(e){return new(e||Ie)(s.Nb(O.c),s.Nb(s.P),s.Nb(M),s.Nb(Ce))},Ie.\u0275cmp=s.Hb({type:Ie,selectors:[["variables-folder-content"]],viewQuery:function(e,n){var t;1&e&&(s.Kc(we,!0),s.Kc(Pe,!0)),2&e&&(s.sc(t=s.cc())&&(n.itemsContextMenu=t.first),s.sc(t=s.cc())&&(n.viewportContextMenu=t.first))},hostAttrs:[1,""],inputs:{Items:"Items",Path:"Path"},features:[s.yb([Ce])],decls:5,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["viewportContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["class","context-menu-header",4,"ngIf"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider",""],["nz-submenu","","nzTitle","New Variable","nzIcon","field-binary"],[1,"context-menu"],["nz-menu-item","",3,"click"],["nz-menu-divider","",4,"ngIf"],[1,"context-menu-header"],["icon","edit"],["icon","delete"]],template:function(e,n){1&e&&(s.Ob(0,"ag-grid-angular",0),s.Ec(1,Ne,19,5,"ng-template",null,1,s.Fc),s.Ec(3,Fe,13,0,"ng-template",null,2,s.Fc)),2&e&&s.lc("dbGrid",n.grid)},directives:[Se.a,N.b,Me.c,l.o,Me.d,k.a,Me.g,Me.e,Oe.c],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}"]}),Ie),Ge=function(){function e(n,t){a(this,e),this.mEvent=t,this.SelectedData=n.getSelectedNodes().map((function(e){return e.data}))}return o(e,[{key:"SelectedCount",get:function(){return this.SelectedData.length}},{key:"Any",get:function(){return this.SelectedCount>0}},{key:"Single",get:function(){return 1===this.SelectedCount}},{key:"First",get:function(){return this.SelectedCount>0?this.SelectedData[0]:null}},{key:"IsShiftPressed",get:function(){return this.mEvent.shiftKey}}]),e}(),Ve=["tree"],je=["folderContextMenu"],$e=function(){return["fas","angle-right"]};function De(e,n){1&e&&s.Ob(0,"fa-icon",25),2&e&&s.lc("icon",s.nc(1,$e))}var Ae=function(){return["fas","angle-down"]};function Re(e,n){1&e&&s.Ob(0,"fa-icon",25),2&e&&s.lc("icon",s.nc(1,Ae))}function He(e,n){1&e&&s.Ob(0,"i",26)}function Ue(e,n){1&e&&s.Ob(0,"i",27)}function qe(e,n){if(1&e){var t=s.Ub();s.Tb(0,"div",21),s.bc("click",(function(e){s.wc(t);var n=s.ec().$implicit;return s.ec().clickFolderExpander(n,e)})),s.Ec(1,De,1,2,"fa-icon",22),s.Ec(2,Re,1,2,"fa-icon",22),s.Ec(3,He,1,0,"i",23),s.Ec(4,Ue,1,0,"i",24),s.Sb()}if(2&e){var o=s.ec().$implicit;s.zb(1),s.lc("ngIf",!o.isExpanded),s.zb(1),s.lc("ngIf",o.isExpanded),s.zb(1),s.lc("ngIf",!o.isExpanded),s.zb(1),s.lc("ngIf",o.isExpanded)}}function Le(e,n){1&e&&s.Ob(0,"div",28)}function We(e,n){if(1&e){var t=s.Ub();s.Tb(0,"div",29),s.Tb(1,"input",30,31),s.bc("keydown.enter",(function(e){s.wc(t);var n=s.tc(2),o=s.ec().$implicit;return s.ec().saveName(o,n,e)}))("keydown.escape",(function(e){s.wc(t);var n=s.ec().$implicit;return s.ec().cancelCreateOrRenameFolder(n,e)}))("focus",(function(e){s.wc(t);var n=s.ec().$implicit;return s.ec().SelectIfCreateFolder(n,e)})),s.Sb(),s.Sb()}if(2&e){var o=s.ec().$implicit;s.zb(1),s.lc("value",o.data.Name)("dbAllowedCharacters","[a-zA-Z0-9_]")}}function Ze(e,n){if(1&e&&(s.Ob(0,"tree-node-content",32),s.fc(1,"async")),2&e){var t,o=s.ec(),a=o.$implicit,i=o.index,r=s.ec();s.Fb("selected",(null==(t=s.gc(1,4,r.variablesService.SelectedFolder$))?null:t.Path)==a.data.Path),s.lc("node",a)("index",i)}}function Je(e,n){if(1&e){var t=s.Ub();s.Tb(0,"div",14),s.bc("click",(function(e){return s.wc(t),n.$implicit.mouseAction("click",e)}))("contextmenu",(function(e){return s.wc(t),n.$implicit.mouseAction("contextMenu",e)})),s.fc(1,"async"),s.Tb(2,"div",15),s.Ec(3,qe,5,4,"div",16),s.Ec(4,Le,1,0,"div",17),s.Tb(5,"div",18),s.bc("dblclick",(function(e){return s.wc(t),n.$implicit.mouseAction("dblClick",e)}))("contextmenu",(function(e){return s.wc(t),n.$implicit.mouseAction("contextMenu",e)}))("treeDrop",(function(e){return s.wc(t),n.$implicit.onDrop(e)})),s.Ec(6,We,3,2,"div",19),s.Ec(7,Ze,2,6,"tree-node-content",20),s.Sb(),s.Sb(),s.Sb()}if(2&e){var o,a=n.$implicit,i=s.ec();s.Cc("padding-left",a.getNodePadding()),s.Fb("selected",(null==(o=s.gc(1,15,i.variablesService.SelectedFolder$))?null:o.Path)==a.data.Path),s.zb(3),s.lc("ngIf",a.hasChildren),s.zb(1),s.lc("ngIf",!a.hasChildren),s.zb(1),s.Fb("node-content-wrapper-active",a.isActive)("node-content-wrapper-focused",a.isFocused),s.lc("treeAllowDrop",a.allowDrop)("treeDrag",a)("treeDragEnabled",a.allowDrag()),s.zb(1),s.lc("ngIf",a.data.edit),s.zb(1),s.lc("ngIf",!a.data.edit)}}function Be(e,n){if(1&e&&(s.Ob(0,"variables-folder-content",33),s.fc(1,"async")),2&e){var t=n.$implicit,o=s.ec();s.lc("Items",s.gc(1,2,o.ItemsInPath$))("Path",t)}}function Ke(e,n){1&e&&(s.Tb(0,"div",34),s.Gc(1," No Variables found in folder... "),s.Sb())}function Xe(e,n){if(1&e){var t=s.Ub();s.Tb(0,"li",37),s.bc("click",(function(){s.wc(t);var e=s.ec().$implicit;return s.ec().RenameFolder(e.Node)})),s.Ob(1,"db-icon",40),s.Gc(2," Rename Folder "),s.Sb()}}function Ye(e,n){if(1&e){var t=s.Ub();s.Tb(0,"li",37),s.bc("click",(function(){s.wc(t);var e=s.ec().$implicit;return s.ec().DeleteDirectory(e.Folder)})),s.Ob(1,"db-icon",41),s.Gc(2," Delete Folder "),s.Sb()}}function Qe(e,n){if(1&e){var t=s.Ub();s.Tb(0,"ul",35),s.Tb(1,"div",36),s.Gc(2),s.Sb(),s.Tb(3,"li",37),s.bc("click",(function(){s.wc(t);var e=n.$implicit;return s.ec().CreateSubFolder(e.Node)})),s.Ob(4,"db-icon",38),s.Rb(5),s.Gc(6,"New Folder"),s.Qb(),s.Sb(),s.Ec(7,Xe,3,0,"li",39),s.Ec(8,Ye,3,0,"li",39),s.Sb()}if(2&e){var o=n.$implicit;s.zb(2),s.Ic(" ",(null==o.Folder?null:o.Folder.Name)||"/"," "),s.zb(5),s.lc("ngIf",o.Folder),s.zb(1),s.lc("ngIf",o.Folder)}}var en,nn,tn,on,an,rn=function(){return[]},cn=((en=function(){function n(e,t,o,i,r,c){var l=this;a(this,n),this.ui=e,this.viewContainerRef=t,this.variablesService=o,this.cref=i,this.overlay=r,this.nzContextMenuService=c,this.nodes$=this.variablesService.rootNode$.pipe(Object(b.a)((function(e){return e.Children}))),this.ItemsInPath$=this.variablesService.SelectedFolderItems$,this.SelectedFolderPath$=this.variablesService.SelectedFolder$.pipe(Object(f.a)((function(e){return!!e})),Object(b.a)((function(e){return e.Path}))),this.actionMapping={mouse:{click:function(e,n,t){l.variablesService.SetSelectedFolder(n.data),l.variablesService.GetVariablesInSelectedFolder().subscribe()},dblClick:function(e,n,t){m.a.TOGGLE_EXPANDED(e,n,t)},contextMenu:function(e,n,t){t.preventDefault(),t.stopPropagation(),l.variablesService.SetSelectedFolder(n.data),l.openFolderContextMenu(t,n)}}},this.options={idField:"Path",displayField:"Name",childrenField:"Children",actionMapping:this.actionMapping,levelPadding:10},this.col=8,this.id=-1}return o(n,[{key:"NormalizeTreeNode",value:function(e){var n=this,t=Object.assign(Object.assign({},e),{key:e.Path,title:e.Name,children:null});return e.Children?t.children=e.Children.map((function(e){return n.NormalizeTreeNode(e)})):t.isLeaf=!0,t}},{key:"clickTreeNode",value:function(e){console.log(e),this.variablesService.SetSelectedFolder(e.node.origin),this.variablesService.GetVariablesInSelectedFolder().subscribe()}},{key:"openFolderContextMenu",value:function(e,n){var t;null===(t=this.FolderContextMenu)||void 0===t||t.Close(),this.FolderContextMenu=this.overlay.OpenContextMenu(e,this.folderContextMenu,this.viewContainerRef,this.BuildContext(n))}},{key:"BuildContext",value:function(e){return{Node:e,Folder:null==e?void 0:e.data}}},{key:"clickFolderExpander",value:function(e,n){n.stopPropagation(),n.preventDefault(),this.CloseContextMenu(),e.toggleExpanded()}},{key:"CloseContextMenu",value:function(){var e;null===(e=this.FolderContextMenu)||void 0===e||e.Close()}},{key:"CreateSubFolder",value:function(n){var t=new p;t.Name="NewFolder",t.edit="create",n?(n.data.Children||(n.children=[],n.data.Children=[]),n.data.Children=[t].concat(e(n.data.Children))):this.tree.treeModel.nodes=[t].concat(e(this.tree.treeModel.nodes)),this.tree.treeModel.update(),this.CloseContextMenu(),this.cref.detectChanges(),n&&this.tree.treeModel.getNodeById(n.id).expand()}},{key:"saveName",value:function(e,n,t){var o,a;if(n.value){switch(e.data.edit){case"create":e.data.Name=n.value,this.variablesService.NewFolder("".concat((null===(o=e.realParent)||void 0===o?void 0:o.data.Parent)||"","/").concat((null===(a=e.realParent)||void 0===a?void 0:a.data.Name)||""),e.data.Name).subscribe();break;case"rename":console.log(e.data.Parent,e.data.Name,n.value),this.variablesService.RenameFolder(e.data.Parent,e.data.Name,n.value).subscribe(),e.data.Name=n.value,e.data.edit=null}e.data.edit=null,this.cref.detectChanges()}}},{key:"cancelCreateOrRenameFolder",value:function(e,n){switch(e.data.edit){case"create":e.realParent?e.realParent.data.Children=e.realParent.data.Children.filter((function(n){return n.Path!=e.data.Path})):this.tree.treeModel.nodes=this.tree.treeModel.nodes.filter((function(n){return n.Path!=e.data.Path})),this.tree.treeModel.update()}e.data.edit=null,this.cref.detectChanges()}},{key:"RenameFolder",value:function(e){e.data.edit="rename",this.CloseContextMenu(),this.cref.detectChanges()}},{key:"DeleteDirectory",value:function(e){this.variablesService.RemoveFolder(e.Parent,e.Name).subscribe(),this.CloseContextMenu()}},{key:"SelectIfCreateFolder",value:function(e,n){"create"===e.data.edit&&n.target.select(),e.parent.expand()}},{key:"contextMenu",value:function(e,n){this.nzContextMenuService.create(e,n)}},{key:"closeMenu",value:function(){this.nzContextMenuService.close()}},{key:"nzEvent",value:function(e){console.log(e)}},{key:"onResize",value:function(e){var n=this,t=e.col;cancelAnimationFrame(this.id),this.id=requestAnimationFrame((function(){n.col=t}))}},{key:"FolderTreeState",get:function(){return this.variablesService.FolderTreeState},set:function(e){this.variablesService.FolderTreeState=e}}]),n}()).\u0275fac=function(e){return new(e||en)(s.Nb(u.a),s.Nb(s.P),s.Nb(M),s.Nb(s.h),s.Nb(O.c),s.Nb(w.a))},en.\u0275cmp=s.Hb({type:en,selectors:[["global-variables-explorer"]],viewQuery:function(e,n){var t;1&e&&(s.Kc(Ve,!0),s.Kc(je,!0)),2&e&&(s.sc(t=s.cc())&&(n.tree=t.first),s.sc(t=s.cc())&&(n.folderContextMenu=t.first))},decls:21,vars:17,consts:[["nz-row","",2,"flex-grow","1"],["nz-col","","nz-resizable","",1,"col",2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden","background-color","#d6d6d6",3,"nzMinColumn","nzMaxColumn","nzGridColumnCount","nzSpan","nzResize"],["nzDirection","right",2,"background","#eaeaeb","width","4px","right","0px"],[1,"right-wrap"],["nz-icon","","nzType","more","nzTheme","outline",1,"right"],[2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden"],[2,"flex-grow","1","overflow","hidden",3,"state","nodes","options","stateChange","contextmenu"],["tree",""],["treeNodeWrapperTemplate",""],["nz-col","",1,"col","right",2,"display","flex","flex-direction","column","flex-grow","1","overflow","hidden","padding","4px 4px 4px 0px",3,"nzSpan"],[2,"background-color","#292f3b","color","white","font-weight","bold","font-size","1.2rem","line-height","2rem","padding-left","14px"],[3,"Items","Path",4,"ngIf"],["empty",""],["folderContextMenu",""],["xaStopClickPropagation","",1,"node-wrapper",3,"click","contextmenu"],[2,"display","flex","flex-direction","row","padding-left","5px"],["class","expander-area","style","width: 20px; padding-left: 6px;",3,"click",4,"ngIf"],["style","width: 20px; padding-left: 6px;",4,"ngIf"],[1,"node-content-wrapper",3,"treeAllowDrop","treeDrag","treeDragEnabled","dblclick","contextmenu","treeDrop"],["class","ui input",4,"ngIf"],[3,"selected","node","index",4,"ngIf"],[1,"expander-area",2,"width","20px","padding-left","6px",3,"click"],["nz-icon","","style","margin-top:6px; width: 8px;",3,"icon",4,"ngIf"],["class","fitted angle right icon","style","padding-top:3px; width: 8px;",4,"ngIf"],["class","fitted angle down icon","style","padding-top:3px; width: 8px;",4,"ngIf"],["nz-icon","",2,"margin-top","6px","width","8px",3,"icon"],[1,"fitted","angle","right","icon",2,"padding-top","3px","width","8px"],[1,"fitted","angle","down","icon",2,"padding-top","3px","width","8px"],[2,"width","20px","padding-left","6px"],[1,"ui","input"],[2,"width","95%","padding","2px 5px",3,"value","dbSetFocus","dbAllowedCharacters","keydown.enter","keydown.escape","focus"],["nameinput",""],[3,"node","index"],[3,"Items","Path"],[1,"ui","header",2,"margin","auto","margin-top","10%","color","#969696"],["nz-menu","","nzMode","vertical",1,"context-menu"],[1,"context-menu-header"],["nz-menu-item","",3,"click"],["icon","folder"],["nz-menu-item","",3,"click",4,"ngIf"],["icon","edit"],["icon","delete"]],template:function(e,n){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.bc("nzResize",(function(e){return n.onResize(e)})),s.Tb(2,"nz-resize-handle",2),s.Tb(3,"div",3),s.Ob(4,"i",4),s.Sb(),s.Sb(),s.Tb(5,"div",5),s.Tb(6,"tree-root",6,7),s.bc("stateChange",(function(e){return n.FolderTreeState=e}))("contextmenu",(function(e){return n.openFolderContextMenu(e)})),s.fc(8,"async"),s.Ec(9,Je,8,17,"ng-template",null,8,s.Fc),s.Sb(),s.Sb(),s.Sb(),s.Tb(11,"div",9),s.Tb(12,"div",10),s.Gc(13),s.fc(14,"async"),s.Sb(),s.Ec(15,Be,2,4,"variables-folder-content",11),s.fc(16,"async"),s.Sb(),s.Sb(),s.Ec(17,Ke,2,0,"ng-template",null,12,s.Fc),s.Ec(19,Qe,9,3,"ng-template",null,13,s.Fc)),2&e&&(s.zb(1),s.lc("nzMinColumn",3)("nzMaxColumn",20)("nzGridColumnCount",24)("nzSpan",n.col),s.zb(5),s.lc("state",n.FolderTreeState)("nodes",s.gc(8,10,n.nodes$)||s.nc(16,rn))("options",n.options),s.zb(5),s.lc("nzSpan",24-n.col),s.zb(2),s.Ic(" ",s.gc(14,12,n.SelectedFolderPath$),""),s.zb(2),s.lc("ngIf",s.gc(16,14,n.SelectedFolderPath$)))},directives:[P.c,P.a,y.a,y.c,k.a,z.a,m.b,l.o,m.c,m.d,_.b,T.a,T.c,m.f,Ee,Me.c,Me.e,Oe.c],pipes:[l.b],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;overflow:hidden}.right-wrap[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.node-content-wrapper[_ngcontent-%COMP%]{padding-left:0}.node-content-wrapper-active[_ngcontent-%COMP%], .node-content-wrapper-focused[_ngcontent-%COMP%], .node-content-wrapper[_ngcontent-%COMP%]:hover{box-shadow:none}.node-content-wrapper[_ngcontent-%COMP%]:hover{background:none}tree-node-content.selected[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 1px #fff}.node-wrapper[_ngcontent-%COMP%]{padding:.3em}.node-wrapper[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.node-wrapper.selected[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.node-wrapper.selected[_ngcontent-%COMP%]:hover{background-color:rgba(82,94,118,.8313725490196079);color:#fff}.expander-area[_ngcontent-%COMP%]:hover   .ng-fa-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px #525e76)}.node-wrapper.selected[_ngcontent-%COMP%]   .expander-area[_ngcontent-%COMP%]:hover   .ng-fa-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px white)}.folder-context[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}"],changeDetection:0}),en),ln=[{path:"",component:(nn=function e(n){a(this,e),this.uiService=n,n.Set((function(e){e.Header.Title="Global Variables",e.Content.Scrollable=!1,e.Content.Container=!1,e.Header.Icon="folder"}))},nn.\u0275fac=function(e){return new(e||nn)(s.Nb(u.a))},nn.\u0275cmp=s.Hb({type:nn,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&s.Ob(0,"global-variables-explorer")},directives:[cn],styles:[""]}),nn)}],dn=((on=function e(){a(this,e)}).\u0275mod=s.Lb({type:on}),on.\u0275inj=s.Kb({factory:function(e){return new(e||on)},imports:[[d.l.forChild(ln)],d.l]}),on),sn=((tn=function e(){a(this,e)}).\u0275mod=s.Lb({type:tn}),tn.\u0275inj=s.Kb({factory:function(e){return new(e||tn)},imports:[[l.c,F.p,O.a,Z.c,T.b,D.e,A.e,G.c,re.b,be.b,J.c]]}),tn),un=i("YPwk"),bn=((an=function e(){a(this,e)}).\u0275mod=s.Lb({type:an}),an.\u0275inj=s.Kb({factory:function(e){return new(e||an)},imports:[[l.c,F.p,dn,m.e,T.b,O.a,N.c,_.d,sn,un.a]]}),an)}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ubE4:function(t,r,o){"use strict";o.r(r),o.d(r,"FirstSetupModule",function(){return P});var n=o("ofXK"),e=o("3Pt+"),i=o("tyNb"),s=o("fXoL"),u=o("mElL"),c=o("tk/3");let m=(()=>{class t{constructor(t,r,o){this.http=t,this.router=r,this.route=o}GetSetupViewModel(){return this.http.get("/api/first-setup")}SubmitFirstSetupViewModel(t){return this.http.post("/api/first-setup",t)}}return t.\u0275fac=function(r){return new(r||t)(s.Zb(c.c),s.Zb(i.i),s.Zb(i.a))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac}),t})();var p=o("ocnv"),a=o("B+r4"),b=o("PTRe"),f=o("C2AL"),l=o("OzZK"),g=o("RwU8");function h(t,r){if(1&t){const t=s.Wb();s.Vb(0,"form",1),s.dc("ngSubmit",function(){return s.yc(t),s.gc().Submit()}),s.Vb(1,"div",2),s.Vb(2,"nz-form-item"),s.Vb(3,"nz-form-control",3),s.Vb(4,"nz-input-group",4),s.Qb(5,"input",5),s.Ub(),s.Ub(),s.Ub(),s.Vb(6,"nz-form-item"),s.Vb(7,"nz-form-control",6),s.Vb(8,"nz-input-group",7),s.Qb(9,"input",8),s.Ub(),s.Ub(),s.Ub(),s.Vb(10,"nz-form-item"),s.Vb(11,"nz-form-control",6),s.Vb(12,"nz-input-group",7),s.Qb(13,"input",9),s.Ub(),s.Ub(),s.Ub(),s.Vb(14,"button",10),s.Hc(15,"Submit"),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.gc();s.nc("formGroup",t.form),s.Bb(14),s.nc("nzType","primary")}}let d=(()=>{class t{constructor(t,r,o,n,e){this.uiService=t,this.setupApi=r,this.router=o,this.fb=n,this.cref=e,this.errors=[],console.log("constructor"),t.Set(t=>{t.Header.Title="First Setup",t.Content.Scrollable=!1,t.Sidebar.Hide=!0}),this.setupApi.GetSetupViewModel().subscribe(t=>{console.log(t),t.AdminUserExists?this.router.navigate(["/"]):this.createForm()})}createForm(){this.form=this.fb.group({Username:["",[e.q.required,e.q.minLength(5)]],Password:["",[e.q.required,e.q.minLength(8)]],ConfirmPassword:["",[e.q.required,e.q.minLength(8)]]}),console.log(this.form),this.cref.detectChanges()}Submit(){if(!this.form.valid)return;let t=this.form.value;this.errors=[],t.RedirectUri=location.origin,this.setupApi.SubmitFirstSetupViewModel(t).subscribe(t=>{this.router.navigate(["/"])},t=>{this.errors=t.error})}}return t.\u0275fac=function(r){return new(r||t)(s.Pb(u.a),s.Pb(m),s.Pb(i.i),s.Pb(e.e),s.Pb(s.h))},t.\u0275cmp=s.Jb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[["nz-form","","class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],[2,"width","400px"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","Username","placeholder","Username"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","Password","placeholder","Password"],["type","password","nz-input","","formControlName","ConfirmPassword","placeholder","Confirm Password"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(t,r){1&t&&s.Fc(0,h,16,2,"form",0),2&t&&s.nc("ngIf",r.form)},directives:[n.o,e.r,e.n,p.b,e.h,a.c,p.c,a.a,p.a,b.c,f.a,b.b,e.d,e.m,e.g,l.a,g.a],styles:[".login-form[_ngcontent-%COMP%]{margin:100px auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]}),t})();var w=o("FG6W");const z=[{path:"",component:d}];let P=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(r){return new(r||t)},providers:[m],imports:[[n.c,i.l.forChild(z),e.p,w.a]]}),t})()}}]);
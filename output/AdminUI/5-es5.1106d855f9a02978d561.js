!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var c,a=e[Symbol.iterator]();!(i=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Rvt0:function(n,i,r){"use strict";r.r(i),r.d(i,"EndpointRulesModule",function(){return en});var a,l,s,b=r("ofXK"),f=r("tyNb"),h=r("fXoL"),p=r("mElL"),g=function e(){d(this,e)},m=r("vkgz"),v=r("2Vo4"),y=function(){function e(t){d(this,e),this.Item=t,this._showDetails=!1,this.ShowDetailsSubject$=new v.a(!1),this.ShowDetails$=this.ShowDetailsSubject$.asObservable()}return u(e,[{key:"ShowDetails",get:function(){return this._showDetails},set:function(e){this._showDetails=e,this.ShowDetailsSubject$.next(this._showDetails)}}]),e}(),x=r("5+WD"),C=function(){function e(){d(this,e),this.AllItems=[],this.Selected=[]}return u(e,[{key:"Single",get:function(){var e;return 1===(null===(e=this.Selected)||void 0===e?void 0:e.length)?this.Selected[0]:null}},{key:"IsFirst",get:function(){return this.Single?this.AllItems[0].Id===this.Single.Id:null}},{key:"IsLast",get:function(){return this.Single?this.AllItems[this.AllItems.length-1].Id===this.Single.Id:null}}]),e}(),O=r("tk/3"),k=r("lJxs"),z=r("IzEk"),w=r("jfkr"),S=r("mrSG"),M=r("4ZtF"),P=((l=function(e){o(n,e);var t=c(n);function n(){return d(this,n),t.call(this)}return n}(M.a)).\u0275fac=function(e){return new(e||l)},l.\u0275prov=h.Lb({token:l,factory:l.\u0275fac,providedIn:"root"}),l=Object(S.a)([Object(M.e)({name:"endpoint-rules",idKey:"Id"})],l)),I=((a=function(e){o(n,e);var t=c(n);function n(e){var i;return d(this,n),(i=t.call(this,e)).store=e,i}return n}(M.c)).\u0275fac=function(e){return new(e||a)(h.Zb(P))},a.\u0275prov=h.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),U=r("LgUO"),V=((s=function(){function e(t,n,i,o,r){var c=this;d(this,e),this.http=t,this.message=n,this.endpointRulesStore=i,this.endpointRulesQuery=o,this.auth=r,this.RulesOrder={},this.typings$=new v.a([]),this.imports$=new v.a([]),this.Subscribe(),this.message.RunOnEveryReconnect(function(){return c.GetAllRules().subscribe()}),this.message.RunOnEveryReconnect(function(){return c.GetTypings()}),this.message.RunOnEveryReconnect(function(){return c.GetImports()})}return u(e,[{key:"getHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new O.e(e?{Authorization:"Bearer "+this.auth.getAccessToken(),"Content-Type":"application/json-patch+json",Accept:"application/json"}:{Authorization:"Bearer "+this.auth.getAccessToken()})}},{key:"Subscribe",value:function(){var e=this;this.message.Stream("MiddlerRule.Subscribe").pipe(Object(m.a)(function(t){switch(t.Action){case"Created":e.endpointRulesStore.add(t.Payload);break;case"Updated":if(t.MetaData.UpdateOrder){var n=t.Payload;Object.keys(n).forEach(function(t){e.endpointRulesStore.update(t,{Order:n[t]})})}else e.endpointRulesStore.update(t.Payload.Id,function(e){return t.Payload});break;case"Deleted":e.endpointRulesStore.update(t.Payload,function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}),e.endpointRulesStore.remove(t.Payload)}})).subscribe()}},{key:"ReLoadRules",value:function(){var e=this;this.http.get("/api/endpoint-rules",{headers:this.getHeaders()}).pipe(Object(m.a)(function(t){return e.endpointRulesStore.set(t)})).subscribe()}},{key:"GetAllRules",value:function(e){var t=this;return!e&&this.endpointRulesQuery.getHasCache()||this.ReLoadRules(),this.endpointRulesQuery.selectAll().pipe(Object(k.a)(function(e){return e.sort(t.SortRules)}))}},{key:"GetRule",value:function(e){return this.http.get("/api/endpoint-rules/".concat(e),{headers:this.getHeaders()})}},{key:"Add",value:function(e){return this.http.post("/api/endpoint-rules",e,{headers:this.getHeaders()})}},{key:"Remove",value:function(e){return this.http.delete("/api/endpoint-rules/".concat(e),{headers:this.getHeaders()})}},{key:"Update",value:function(e,t){return this.http.put("/api/endpoint-rules/".concat(e),t,{headers:this.getHeaders()})}},{key:"UpdateAction",value:function(e){return this.http.put("/api/endpoint-action/".concat(e.Id),e,{headers:this.getHeaders()})}},{key:"SortRules",value:function(e,t){return e.Order>t.Order?1:e.Order<t.Order?-1:0}},{key:"GetNextLastOrder",value:function(){var e=this.endpointRulesQuery.getAll();return e&&0!==e.length?Math.trunc(Math.max.apply(Math,t(e.map(function(e){return e.Order})))+10):10}},{key:"UpdateRuleOrder",value:function(e,t){var n={};n[e.Id]=t,this.http.post("/api/endpoint-rules/order",n,{headers:this.getHeaders(!0)}).subscribe()}},{key:"SetRuleEnabled",value:function(e,t){this.http.put("/api/endpoint-rules/".concat(e.Id,"/enabled/").concat(t),null,{headers:this.getHeaders(!0)}).subscribe()}},{key:"GetTypings",value:function(){var e=this;this.http.get("api/endpoint-rules/type-definitions",{headers:this.getHeaders()}).pipe(Object(z.a)(1),Object(m.a)(function(t){var n=t.map(function(e){return new w.b(e.Key,e.Value,!1)});e.typings$.next(n)})).subscribe()}},{key:"GetImports",value:function(){var e=this;this.http.get("api/endpoint-rules/import-definitions",{headers:this.getHeaders()}).pipe(Object(z.a)(1),Object(m.a)(function(t){var n=t.map(function(e){return new w.b(e.Key,e.Value,!1)});e.imports$.next(n)})).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||s)(h.Zb(O.c),h.Zb(p.d),h.Zb(P),h.Zb(I),h.Zb(U.b))},s.\u0275prov=h.Lb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),A=r("h0m+"),R=function e(){d(this,e),this.Enabled=!0},T=function e(){d(this,e),this.RewriteTo=""},_=function(e){o(n,e);var t=c(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).ActionType="UrlRewrite",e.Parameters=new T,e.Terminating=!1,e}return n}(R),H=r("3Pt+"),B=r("t7qs"),F=r("OzZK"),D=r("RwU8"),G=r("C2AL"),Q=r("Nqz0"),L=r("FwiY"),E=r("Q8cG");function N(e,t){1&e&&(h.Vb(0,"div"),h.Hc(1,"Action"),h.Ub())}var j,W=["*"],J=((j=function(){function e(){d(this,e),this.ok=new h.n,this.save=new h.n,this.cancel=new h.n,this.ctrls=!1}return u(e,[{key:"keydown",value:function(e){e.stopPropagation();var t=String.fromCharCode(e.which).toLowerCase();e.ctrlKey&&"s"===t&&(e.preventDefault(),this.ctrls||(this.ctrls=!0,this.save.next()))}},{key:"keyup",value:function(e){e.stopPropagation();var t=String.fromCharCode(e.which).toLowerCase();e.ctrlKey&&"s"===t&&(e.preventDefault(),this.ctrls=!1)}}]),e}()).\u0275fac=function(e){return new(e||j)},j.\u0275cmp=h.Jb({type:j,selectors:[["action-basic-modal"]],hostAttrs:[1,"flex-grow-column","action-basic-modal"],hostBindings:function(e,t){1&e&&h.dc("keydown",function(e){return t.keydown(e)},!1,h.xc)("keyup",function(e){return t.keyup(e)},!1,h.xc)},inputs:{form:"form"},outputs:{ok:"ok",save:"save",cancel:"cancel"},ngContentSelectors:W,decls:25,vars:4,consts:[[1,"modal-header",2,"padding","10px !important","display","flex","margin-bottom","1px"],[2,"font-size","2em","font-weight","bold","line-height","1.4285em","color","whitesmoke","margin","auto"],["dbPortal","ActionModalHeader-Left",1,"Irgendwos"],["left","dbPortal"],[4,"ngIf"],[2,"flex-grow","1"],["dbPortal","ActionModalHeader-Right"],[1,"modal-content"],[1,"modal-footer",2,"margin-bottom","0px","margin-top","1px","background","#292f3b","padding","2px"],["nz-button","","nzType","default",1,"secondary",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu","disabled"],["nz-icon","","nzType","ellipsis"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(h.mc(),h.Vb(0,"div",0),h.Vb(1,"div",1),h.Rb(2,2,3),h.Fc(4,N,2,0,"div",4),h.Ub(),h.Qb(5,"div",5),h.Vb(6,"div"),h.Rb(7,6),h.Ub(),h.Ub(),h.Vb(8,"div",7),h.lc(9),h.Ub(),h.Vb(10,"div",8),h.Vb(11,"button",9),h.dc("click",function(){return t.cancel.next()}),h.Hc(12,"Cancel"),h.Ub(),h.Qb(13,"div",5),h.Vb(14,"nz-button-group"),h.Vb(15,"button",10),h.dc("click",function(){return t.ok.next()}),h.Hc(16,"Submit & Close"),h.Ub(),h.Vb(17,"button",11),h.Qb(18,"i",12),h.Ub(),h.Ub(),h.Ub(),h.Vb(19,"nz-dropdown-menu",null,13),h.Vb(21,"ul",14),h.Vb(22,"li",15),h.dc("click",function(){return t.save.next()}),h.Vb(23,"a"),h.Hc(24,"Save Action without close"),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&e){var n=h.vc(3),i=h.vc(20);h.Bb(4),h.nc("ngIf",!n.hasSource),h.Bb(11),h.nc("disabled",!t.form.valid),h.Bb(2),h.nc("nzDropdownMenu",i)("disabled",!t.form.valid)}},directives:[B.d,b.o,F.a,D.a,G.a,F.b,Q.d,Q.b,L.a,Q.e,E.c,E.e],styles:["[_nghost-%COMP%]{box-shadow:0 0 1px 2px #dedddd;max-width:100%;max-height:100%;background-color:#dedddd}",".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;max-width:100%;max-height:100%}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], action-basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], action-basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}action-basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}.action-basic-modal[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px #bfbfbf!important}"]}),j),K=r("ocnv"),q=r("B+r4"),Z=r("PTRe");function X(e,t){1&e&&h.Hc(0," Url - Rewrite ")}var Y,ee=((Y=function(){function e(t,n){d(this,e),this.fb=t,this.context=n}return u(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({RewriteTo:[]}),this.form.patchValue(this.context.data.Parameters)}},{key:"ok",value:function(){this.context.invoke("OK",this.form.value)}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||Y)(h.Pb(H.e),h.Pb(A.d))},Y.\u0275cmp=h.Jb({type:Y,selectors:[["ng-component"]],decls:7,vars:2,consts:[[3,"form","ok","cancel"],["nz-form","",2,"width","100%",3,"formGroup"],["nzRequired","","nzFor","RewriteTo"],["nz-input","","formControlName","RewriteTo","id","RewriteTo",2,"width","100%"],["dbPortalTemplate","ActionModalHeader-Left"]],template:function(e,t){1&e&&(h.Vb(0,"action-basic-modal",0),h.dc("ok",function(){return t.ok()})("cancel",function(){return t.cancel()}),h.Vb(1,"form",1),h.Vb(2,"nz-form-label",2),h.Hc(3,"RewriteTo"),h.Ub(),h.Vb(4,"nz-form-control"),h.Qb(5,"input",3),h.Ub(),h.Fc(6,X,1,0,"ng-template",4),h.Ub(),h.Ub()),2&e&&(h.nc("form",t.form),h.Bb(1),h.nc("formGroup",t.form))},directives:[J,H.r,H.n,K.b,H.h,q.a,K.d,K.a,Z.b,H.d,H.m,H.g,B.e],styles:[""]}),Y),te=function e(){d(this,e),this.RedirectTo="",this.Permanent=!1,this.PreserveMethod=!0},ne=function(e){o(n,e);var t=c(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).ActionType="UrlRedirect",e.Parameters=new te,e.Terminating=!0,e}return n}(R),ie=r("TaO5");function oe(e,t){1&e&&h.Hc(0," Url - Redirect ")}var re,ce=((re=function(){function e(t,n){d(this,e),this.fb=t,this.context=n}return u(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({RedirectTo:[],Permanent:[],PreserveMethod:[]}),this.form.patchValue(this.context.data.Parameters)}},{key:"ok",value:function(){this.context.invoke("OK",this.form.value)}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||re)(h.Pb(H.e),h.Pb(A.d))},re.\u0275cmp=h.Jb({type:re,selectors:[["ng-component"]],decls:14,vars:2,consts:[[3,"form","ok","cancel"],["nz-form","",2,"width","100%",3,"formGroup"],["nzRequired","","nzFor","RedirectTo"],["nz-input","","formControlName","RedirectTo","id","RedirectTo",2,"width","100%"],[2,"display","flex","flex-direction","row"],[1,"field"],["nz-checkbox","","formControlName","PreserveMethod"],["nz-checkbox","","formControlName","Permanent"],["dbPortalTemplate","ActionModalHeader-Left"]],template:function(e,t){1&e&&(h.Vb(0,"action-basic-modal",0),h.dc("ok",function(){return t.ok()})("cancel",function(){return t.cancel()}),h.Vb(1,"form",1),h.Vb(2,"nz-form-label",2),h.Hc(3,"RedirectTo"),h.Ub(),h.Vb(4,"nz-form-control"),h.Qb(5,"input",3),h.Ub(),h.Vb(6,"div",4),h.Vb(7,"div",5),h.Vb(8,"label",6),h.Hc(9,"PreserveMethod"),h.Ub(),h.Ub(),h.Vb(10,"div",5),h.Vb(11,"label",7),h.Hc(12,"Permanent"),h.Ub(),h.Ub(),h.Ub(),h.Fc(13,oe,1,0,"ng-template",8),h.Ub(),h.Ub()),2&e&&(h.nc("form",t.form),h.Bb(1),h.nc("formGroup",t.form))},directives:[J,H.r,H.n,K.b,H.h,q.a,K.d,K.a,Z.b,H.d,H.m,H.g,ie.a,B.e],styles:[".field[_ngcontent-%COMP%]{padding-top:5px}"]}),re),ae=function e(){d(this,e),this.Language="TypeScript"},le=function(e){o(n,e);var t=c(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).ActionType="Script",e.Parameters=new ae,e.Terminating=!0,e}return n}(R),se=r("zAKX");function ue(e,t){1&e&&h.Hc(0," Script ")}function de(e,t){1&e&&(h.Vb(0,"div",6),h.Vb(1,"div",7),h.Vb(2,"nz-select",8),h.Qb(3,"nz-option",9),h.Qb(4,"nz-option",10),h.Qb(5,"nz-option",11),h.Ub(),h.Ub(),h.Ub())}var be,fe,he=function(){return{noLib:!0}},pe=((fe=function(){function e(t,n,i){d(this,e),this.fb=t,this.context=n,this.rulesService=i,this.typings$=this.rulesService.typings$.pipe(Object(m.a)(function(e){return console.log(e)})),this.imports$=this.rulesService.imports$.pipe(Object(m.a)(function(e){return console.log(e)}))}return u(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Language:[],SourceCode:[]}),this.context.data.Parameters.Language||(this.context.data.Parameters.Language="TypeScript"),this.form.patchValue(this.context.data.Parameters)}},{key:"initRestrictionsAccordion",value:function(e){$(e.nativeElement).accordion()}},{key:"ok",value:function(){this.context.invoke("OK",this.form.value)}},{key:"save",value:function(){console.log("save modal"),this.context.invoke("Save",this.form.value)}},{key:"cancel",value:function(){this.context.handle.Close()}}]),e}()).\u0275fac=function(e){return new(e||fe)(h.Pb(H.e),h.Pb(A.d),h.Pb(V))},fe.\u0275cmp=h.Jb({type:fe,selectors:[["ng-component"]],decls:8,vars:11,consts:[[3,"form","ok","cancel","save"],["nz-form","",1,"flex-grow-column",2,"width","100%",3,"formGroup"],[1,"field","flex-grow-column"],["formControlName","SourceCode",2,"max-width","100%","max-height","100%","position","relative",3,"language","typings","files","tsOptions"],["dbPortalTemplate","ActionModalHeader-Left"],["dbPortalTemplate","ActionModalHeader-Right"],[1,"fields"],[2,"width","180px"],["formControlName","Language",2,"width","100%"],["nzLabel","TypeScript","nzValue","TypeScript"],["nzLabel","JavaScript","nzValue","JavaScript"],["nzLabel","PowerShellCore","nzValue","PowerShellCore"]],template:function(e,t){1&e&&(h.Vb(0,"action-basic-modal",0),h.dc("ok",function(){return t.ok()})("cancel",function(){return t.cancel()})("save",function(){return t.save()}),h.Vb(1,"form",1),h.Vb(2,"div",2),h.Qb(3,"db-editor",3),h.hc(4,"async"),h.hc(5,"async"),h.Ub(),h.Fc(6,ue,1,0,"ng-template",4),h.Fc(7,de,6,0,"ng-template",5),h.Ub(),h.Ub()),2&e&&(h.nc("form",t.form),h.Bb(1),h.nc("formGroup",t.form),h.Bb(2),h.nc("language",t.form.value.Language)("typings",h.ic(4,6,t.typings$))("files",h.ic(5,8,t.imports$))("tsOptions",h.pc(10,he)))},directives:[J,H.r,H.n,K.b,H.h,w.a,H.m,H.g,B.e,se.b,se.a],pipes:[b.b],styles:[""]}),fe),ge=((be=function(){function e(t,n){d(this,e),this.modal=t,this.componentFactoryResolver=n}return u(e,[{key:"GetIcon",value:function(e){switch(e.ActionType){case"UrlRedirect":return"rollback";case"UrlRewrite":return"edit";case"Proxy":return"fa#random";case"Script":return"code"}return"hat wizard"}},{key:"GetModal",value:function(e){switch(e.toLowerCase()){case"urlredirect":return this.modal.FromComponent(ce).SetModalOptions({componentFactoryResolver:this.componentFactoryResolver,overlayConfig:{width:"50%",maxWidth:"500px"}}).CloseOnOutsideClick();case"urlrewrite":return this.modal.FromComponent(ee).SetModalOptions({componentFactoryResolver:this.componentFactoryResolver,overlayConfig:{width:"50%",maxWidth:"500px"}}).CloseOnOutsideClick();case"script":return this.modal.FromComponent(pe).SetModalOptions({componentFactoryResolver:this.componentFactoryResolver,overlayConfig:{width:"80%",height:"90%"}}).CloseOnOutsideClick()}}}]),e}()).\u0275fac=function(e){return new(e||be)(h.Zb(A.b),h.Zb(h.j))},be.\u0275prov=h.Lb({token:be,factory:be.\u0275fac,providedIn:"root"}),be),me=r("gPmL"),ve=r("nJia"),ye=["contextMenu"],xe=["addRuleTemplate"];function Ce(e,t){1&e&&(h.Vb(0,"div",8),h.Vb(1,"div",9),h.Hc(2,"Currently there is nothing..."),h.Ub(),h.Vb(3,"p"),h.Hc(4,"Use the ContextMenu to create your first rule!"),h.Ub(),h.Ub())}function Oe(e,t){if(1&e&&(h.Vb(0,"span",21),h.Qb(1,"db-icon",22),h.Ub()),2&e){var n=t.$implicit,i=h.gc(2);h.nc("nzTooltipTitle",n.ActionType),h.Bb(1),h.nc("icon",i.GetIcon(n))}}function ke(e,t){1&e&&h.Qb(0,"div",23)}function ze(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",10),h.dc("click",function(e){h.yc(n);var i=t.$implicit;return h.gc().clickAction(e,i)})("contextmenu",function(e){h.yc(n);var i=t.$implicit,o=h.gc(),r=h.vc(11);return o.openItemContextMenu(e,r,i)})("dblclick",function(){h.yc(n);var e=t.$implicit;return h.gc().editRule(e.Item.Id)}),h.Vb(1,"div",11),h.Vb(2,"div",12),h.Qb(3,"db-icon",13),h.Ub(),h.Vb(4,"div",14),h.Vb(5,"div",15),h.Hc(6),h.Ub(),h.Vb(7,"div"),h.Hc(8),h.Ub(),h.Ub(),h.Vb(9,"div",16),h.Vb(10,"div"),h.Hc(11),h.Ub(),h.Vb(12,"div"),h.Hc(13),h.Ub(),h.Ub(),h.Vb(14,"div",17),h.Vb(15,"div",18),h.Vb(16,"div"),h.Hc(17),h.Ub(),h.Fc(18,Oe,2,2,"span",19),h.Ub(),h.Fc(19,ke,1,0,"div",20),h.Ub(),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit,o=h.gc();h.Hb("selected",i.Selected)("disabled",!i.Item.Enabled),h.Bb(6),h.Ic(i.Item.Name),h.Bb(2),h.Ic(i.Item.Path),h.Bb(3),h.Ic(i.Item.Scheme),h.Bb(2),h.Ic(i.Item.Hostname),h.Bb(4),h.Jc(" ",(null==i.Item.Actions?null:i.Item.Actions.length)||0," Actions "),h.Bb(1),h.nc("ngForOf",i.Item.Actions),h.Bb(1),h.nc("ngIf",o.IsRuleTerminating(i.Item))}}function we(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",24),h.Vb(1,"li",25),h.Vb(2,"ul",26),h.Vb(3,"li",27),h.dc("click",function(){return h.yc(n),h.gc().CreateRuleOnTop()}),h.Qb(4,"db-icon",28),h.Hc(5," Top "),h.Ub(),h.Vb(6,"li",27),h.dc("click",function(){return h.yc(n),h.gc().CreateRuleOnBottom()}),h.Qb(7,"db-icon",29),h.Hc(8," Bottom "),h.Ub(),h.Ub(),h.Ub(),h.Ub()}}function Se(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",27),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().SetRuleEnabled(e.Single,!0)}),h.Qb(1,"db-icon",34),h.Hc(2," Enable "),h.Ub()}}function Me(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",27),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().SetRuleEnabled(e.Single,!1)}),h.Qb(1,"db-icon",35),h.Hc(2," Disable "),h.Ub()}}function Pe(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",25),h.Vb(1,"ul",26),h.Vb(2,"li",27),h.dc("click",function(){return h.yc(n),h.gc(2).CreateRuleOnTop()}),h.Qb(3,"db-icon",28),h.Hc(4," Top "),h.Ub(),h.Vb(5,"li",27),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateRuleBefore(e.Single)}),h.Qb(6,"db-icon",36),h.Hc(7," Before "),h.Ub(),h.Vb(8,"li",27),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateRuleAfter(e.Single)}),h.Qb(9,"db-icon",37),h.Hc(10," After "),h.Ub(),h.Vb(11,"li",27),h.dc("click",function(){return h.yc(n),h.gc(2).CreateRuleOnBottom()}),h.Qb(12,"db-icon",29),h.Hc(13," Bottom "),h.Ub(),h.Ub(),h.Ub()}}function Ie(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",24),h.Fc(1,Se,3,0,"li",30),h.Fc(2,Me,3,0,"li",30),h.Fc(3,Pe,14,0,"li",31),h.Qb(4,"li",32),h.Vb(5,"li",27),h.dc("click",function(){h.yc(n);var e=t.$implicit;return h.gc().RemoveRules(e.Selected)}),h.Qb(6,"db-icon",33),h.Hc(7," Remove "),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit;h.Bb(1),h.nc("ngIf",!1===(null==i.Single?null:i.Single.Enabled)),h.Bb(1),h.nc("ngIf",!0===(null==i.Single?null:i.Single.Enabled)),h.Bb(1),h.nc("ngIf",i.Single)}}var Ue,Ve,Ae=function(){return[]},Re=((Ve=function(){function e(t,n,i,o,r,c,a,l){d(this,e),this.rulesService=t,this.cref=n,this.overlay=i,this.viewContainerRef=o,this.router=r,this.route=c,this.actionHelper=a,this.endpointRulesQuery=l,this._rules=[],this.rulesSubject$=new v.a(this._rules),this.rules$=this.rulesSubject$.asObservable(),this.rulesChanged=new h.n,this.selected=[],this.registered=[],this.onTouched=function(){}}return u(e,[{key:"rules",get:function(){return this._rules.map(function(e){return e.Item})},set:function(e){var t=this;this._rules=(e||[]).map(function(e){var n=t._rules.find(function(t){return t.Item.Id===e.Id});return n?(n.Item=e,n):new y(e)}),this.rulesSubject$.next(this._rules)}},{key:"ngOnInit",value:function(){var e=this;this.rulesService.GetAllRules().pipe(Object(m.a)(function(t){e.rules=t})).subscribe()}},{key:"ngAfterViewInit",value:function(){}},{key:"clickAction",value:function(e,t){e.ctrlKey?t.Selected=!t.Selected:this._rules=this._rules.map(function(e){return e.Selected=e==t,e})}},{key:"openOuterContextMenu",value:function(e,t){var n;e.stopPropagation(),null===(n=this.ContextMenu)||void 0===n||n.Close(),this.ContextMenu=this.overlay.OpenContextMenu(e,t,this.viewContainerRef,null)}},{key:"openItemContextMenu",value:function(e,t,n){var i;e.stopPropagation();var o=this._rules.filter(function(e){return e.Selected});0!=o.length&&o.includes(n)||(this._rules=this._rules.map(function(e){return e.Selected=e==n,e})),null===(i=this.ContextMenu)||void 0===i||i.Close(),this.ContextMenu=this.overlay.OpenContextMenu(e,t,this.viewContainerRef,this.BuildContext())}},{key:"DeSelectAll",value:function(){console.log("Deselect"),this._rules=this._rules.map(function(e){return e.Selected=!1,e})}},{key:"SetRuleEnabled",value:function(e,t){var n;null===(n=this.ContextMenu)||void 0===n||n.Close(),this.rulesService.SetRuleEnabled(e,t)}},{key:"GetActionByIndex",value:function(e){return this.rules[e]}},{key:"GetActionById",value:function(e){return this.rules.find(function(t){return t.Id===e})}},{key:"ClearSelection",value:function(){this.selected=[],this.cref.markForCheck()}},{key:"BuildContext",value:function(){var e=new C;return e.AllItems=this.rules,e.Selected=this._rules.filter(function(e){return e.Selected}).map(function(e){return e.Item}),e}},{key:"IsRuleTerminating",value:function(e){return!!e.Actions&&-1!=e.Actions.findIndex(function(e){return e.Enabled&&e.Terminating})}},{key:"initContextMenu",value:function(e){}},{key:"CreateRuleOnTop",value:function(){var e=new g;e.Enabled=!1,e.Order=this.rules&&0!=this.rules.length?this.rules[0].Order/2:10,this.rulesService.Add(e).subscribe(),this.ContextMenu.Close()}},{key:"CreateRuleBefore",value:function(e){var t=this.rules.findIndex(function(t){return t.Order===e.Order}),n=new g;n.Enabled=!1,n.Order=0==t?e.Order/2:e.Order-(e.Order-this.rules[t-1].Order)/2,console.log(n),this.rulesService.Add(n).subscribe(),this.ContextMenu.Close()}},{key:"CreateRuleAfter",value:function(e){var t=this.rules.findIndex(function(t){return t.Order===e.Order}),n=new g;n.Enabled=!1,n.Order=t==this.rules.length-1?this.rulesService.GetNextLastOrder():e.Order+(this.rules[t+1].Order-e.Order)/2,console.log(n),this.rulesService.Add(n).subscribe(),this.ContextMenu.Close()}},{key:"CreateRuleOnBottom",value:function(){var e=new g;e.Enabled=!1,e.Order=this.rulesService.GetNextLastOrder(),this.rulesService.Add(e).subscribe(),this.ContextMenu.Close()}},{key:"RemoveRules",value:function(e){var t=this;e.forEach(function(e){return t.rulesService.Remove(e.Id).subscribe()}),this.ContextMenu.Close()}},{key:"editRule",value:function(e){this.router.navigate([e],{relativeTo:this.route})}},{key:"calculateRuleOrder",value:function(e){if(0===this.rules.length)return 10;if(0===e)return this.rules[0].Order/2;if(e>=this.rules.length)return this.rulesService.GetNextLastOrder();var t=this.rules[e-1].Order;return(this.rules[e].Order-t)/2+t}},{key:"drop",value:function(e){if(e.previousContainer===e.container){var t=this.endpointRulesQuery.getAll().sort(this.rulesService.SortRules),n=t[e.previousIndex],i=null;if(e.previousIndex<e.currentIndex?i="forward":e.previousIndex>e.currentIndex&&(i="back"),!i)return;if("forward"===i)if(e.currentIndex===t.length-1)this.rulesService.UpdateRuleOrder(n,this.rulesService.GetNextLastOrder());else{var o=t[e.currentIndex];this.rulesService.UpdateRuleOrder(n,(t[e.currentIndex+1].Order-o.Order)/2+o.Order)}else if("back"===i)if(0===e.currentIndex)this.rulesService.UpdateRuleOrder(n,t[0].Order/2);else{var r=t[e.currentIndex-1];this.rulesService.UpdateRuleOrder(n,(t[e.currentIndex].Order-r.Order)/2+r.Order)}Object(x.e)(t,e.previousIndex,e.currentIndex)}else{var c=new g;c.Enabled=!1,console.log(e),c.Order=this.calculateRuleOrder(e.currentIndex),this.rulesService.Add(c).subscribe()}}},{key:"GetIcon",value:function(e){return this.actionHelper.GetIcon(e)}},{key:"prepareIcon",value:function(e){if(!e)return null;if(e.startsWith("fa#")){var t={type:"fa",icon:null};return e=e.substring(3),t.icon=e.includes("|")?e.split("|"):e,t}return{type:"ant",icon:e}}},{key:"propagateChange",value:function(e){this.rulesChanged.next(e),this.registered.forEach(function(t){t(e)})}},{key:"writeValue",value:function(e){this.rules=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){throw new Error("Method not implemented.")}}]),e}()).\u0275fac=function(e){return new(e||Ve)(h.Pb(V),h.Pb(h.h),h.Pb(A.c),h.Pb(h.Q),h.Pb(f.i),h.Pb(f.a),h.Pb(ge),h.Pb(I))},Ve.\u0275cmp=h.Jb({type:Ve,selectors:[["enpoint-rules-list"]],viewQuery:function(e,t){var n;1&e&&(h.Lc(ye,1),h.Lc(xe,1)),2&e&&(h.uc(n=h.ec())&&(t.contextMenu=n.first),h.uc(n=h.ec())&&(t.addRuleTemplate=n.first))},inputs:{rules:"rules"},outputs:{rulesChanged:"rulesChanged"},decls:12,vars:7,consts:[["cdkDropList","",1,"outer",2,"flex-grow","1","height","100%",3,"contextmenu"],["nullList","cdkDropList"],["cdkDropList","",1,"",2,"padding","2px","margin-top","8px","max-height","calc(100% - 30px)","overflow-y","auto",3,"cdkDropListDropped"],["rulesList","cdkDropList"],["style","text-align: center; font-size: 1.3em; font-weight: bold; color: #525e7678; line-height: 1.4em; line-height: 2em; margin: 0px 10px;",4,"ngIf"],["class","rule-item","cdkDrag","","cdkDragLockAxis","y",3,"selected","disabled","click","contextmenu","dblclick",4,"ngFor","ngForOf"],["outerContextMenu",""],["itemContextMenu",""],[2,"text-align","center","font-size","1.3em","font-weight","bold","color","#525e7678","line-height","1.4em","line-height","2em","margin","0px 10px"],[2,"font-size","1.5em"],["cdkDrag","","cdkDragLockAxis","y",1,"rule-item",3,"click","contextmenu","dblclick"],[2,"display","flex","min-height","60px"],["cdkDragHandle","",1,"dragHandle",2,"padding","10px 0px 0px 5px"],["icon","fa#ellipsis-v",2,"width","1.18em","margin","0 .25rem 0 0","font-size","1.2em"],[2,"padding","5px","flex-grow","1"],[2,"font-size","large","font-weight","bold","color","#292f3b"],[2,"padding","5px","min-width","200px","max-width","200px"],[2,"min-width","200px","max-width","200px","display","flex"],[2,"flex-grow","1","padding","5px"],["nz-tooltip","",3,"nzTooltipTitle",4,"ngFor","ngForOf"],["class","terminate-indicator","nz-tooltip","","nzTooltipTitle","Stop processing further Rules",4,"ngIf"],["nz-tooltip","",3,"nzTooltipTitle"],[3,"icon"],["nz-tooltip","","nzTooltipTitle","Stop processing further Rules",1,"terminate-indicator"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-submenu","","nzTitle","Add Rule","nzIcon","menu-unfold"],[1,"context-menu"],["nz-menu-item","",3,"click"],["icon","double-left","rotate","90"],["icon","double-right","rotate","90"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-submenu","","nzTitle","Add Rule","nzIcon","menu-unfold",4,"ngIf"],["nz-menu-divider",""],["icon","delete"],["icon","fa#toggle-on"],["icon","fa#toggle-off"],["icon","up"],["icon","down"]],template:function(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",0,1),h.dc("contextmenu",function(e){h.yc(n);var i=h.vc(9);return t.openOuterContextMenu(e,i)}),h.Vb(2,"div",2,3),h.dc("cdkDropListDropped",function(e){return t.drop(e)}),h.Fc(4,Ce,5,0,"div",4),h.hc(5,"async"),h.Fc(6,ze,20,11,"div",5),h.hc(7,"async"),h.Ub(),h.Ub(),h.Fc(8,we,9,0,"ng-template",null,6,h.Gc),h.Fc(10,Ie,8,3,"ng-template",null,7,h.Gc)}2&e&&(h.Bb(4),h.nc("ngIf",0===(h.ic(5,2,t.rules$)||h.pc(6,Ae)).length),h.Bb(2),h.nc("ngForOf",h.ic(7,4,t.rules$)))},directives:[x.c,b.o,b.n,x.a,x.b,me.c,ve.d,E.c,G.a,E.g,E.e,E.d],pipes:[b.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.rule-item[_ngcontent-%COMP%]{margin-bottom:10px!important;border-radius:0!important;box-shadow:0 0 3px 1px #cecece;background-color:#fff}.rule-item.disabled[_ngcontent-%COMP%]{opacity:.6;box-shadow:none;background-color:#e2e2e2}.rule-item[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{border-right:1px solid #fff}.rule-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.rule-item.selected[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{background-color:#292f3b;color:#fff}.rule-item[_ngcontent-%COMP%]:hover{background-color:#b2b7c2}.new-rule.ui.button[_ngcontent-%COMP%]{margin:0}.options[_ngcontent-%COMP%]{background-color:grey;height:50px}.list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:inherit!important}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:inherit}.dragHandle[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}.list-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#e0e1e2}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{cursor:inherit}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:inherit}.list-item.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%], .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{border-radius:0!important;background-color:#2f2f2f;color:#f5f5f5}.outer.cdk-drop-list-dragging[_ngcontent-%COMP%] > .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}.context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}.anticon.disabled[_ngcontent-%COMP%]{color:#ccc}.terminate-indicator[_ngcontent-%COMP%]{width:8px;background-color:#525e76;border-left:1px solid #fff}.action-item.disabled[_ngcontent-%COMP%]   .terminate-indicator[_ngcontent-%COMP%]{background-color:inherit}.action-item[_ngcontent-%COMP%]:hover   .terminate-indicator[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}  .ant-divider-horizontal.ant-divider-with-text-center:after,   .ant-divider-horizontal.ant-divider-with-text-center:before{border-top:1px solid #525e76!important}"],changeDetection:0}),Ve),Te=((Ue=function e(t){d(this,e),this.uiService=t,t.Set(function(e){e.Header.Title="Endpoint Rules",e.Content.Scrollable=!1,e.Header.Icon="fa#stream"})}).\u0275fac=function(e){return new(e||Ue)(h.Pb(p.a))},Ue.\u0275cmp=h.Jb({type:Ue,selectors:[["ng-component"]],decls:2,vars:0,consts:[[2,"display","flex","flex-direction","column","flex-grow","1"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Qb(1,"enpoint-rules-list"),h.Ub())},directives:[Re],styles:[""]}),Ue),_e=r("itXk"),He=r("bHdf"),Be=r("1zMv"),Fe=r("oyxB"),De=r("IvDN"),Ge=["urlredirect"],Qe=["urlrewrite"],Le=["script"];function Ee(e,t){if(1&e&&(h.Vb(0,"div"),h.Hc(1),h.Ub(),h.Vb(2,"div"),h.Hc(3),h.Ub(),h.Vb(4,"div"),h.Hc(5),h.Ub()),2&e){var n=h.gc();h.Bb(1),h.Jc(" Redirect to ",n.action.Parameters.RedirectTo," "),h.Bb(2),h.Jc(" Permanent: ",n.action.Parameters.Permanent," "),h.Bb(2),h.Jc(" PreserveMethod: ",n.action.Parameters.PreserveMethod," ")}}function $e(e,t){if(1&e&&(h.Vb(0,"div"),h.Hc(1),h.Ub()),2&e){var n=h.gc();h.Bb(1),h.Jc(" Rewrite to ",n.action.Parameters.RewriteTo," ")}}function Ne(e,t){if(1&e&&(h.Vb(0,"div"),h.Hc(1),h.Ub()),2&e){var n=h.gc();h.Bb(1),h.Jc(" ",n.action.Parameters.Language," ")}}var je,We=((je=function(){function e(){d(this,e)}return u(e,[{key:"ngOnInit",value:function(){this.template=this.determineTemplate()}},{key:"determineTemplate",value:function(){switch(this.action.ActionType){case"UrlRedirect":return this.UrlRedirect;case"UrlRewrite":return this.UrlRewrite;case"Script":return this.Script}}}]),e}()).\u0275fac=function(e){return new(e||je)},je.\u0275cmp=h.Jb({type:je,selectors:[["action-list-details"]],viewQuery:function(e,t){var n;1&e&&(h.Lc(Ge,3),h.Lc(Qe,3),h.Lc(Le,3)),2&e&&(h.uc(n=h.ec())&&(t.UrlRedirect=n.first),h.uc(n=h.ec())&&(t.UrlRewrite=n.first),h.uc(n=h.ec())&&(t.Script=n.first))},inputs:{action:"action"},decls:8,vars:1,consts:[[2,"font-size","x-small"],[3,"ngTemplateOutlet"],["urlredirect",""],["urlrewrite",""],["script",""]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Rb(1,1),h.Ub(),h.Fc(2,Ee,6,3,"ng-template",null,2,h.Gc),h.Fc(4,$e,2,1,"ng-template",null,3,h.Gc),h.Fc(6,Ne,2,1,"ng-template",null,4,h.Gc)),2&e&&(h.Bb(1),h.nc("ngTemplateOutlet",t.template))},directives:[b.t],styles:[""]}),je),Je=r("6NWb"),Ke=r("5vDB");function qe(e,t){1&e&&(h.Vb(0,"div",8),h.Vb(1,"div",9),h.Hc(2,"Currently there is nothing..."),h.Ub(),h.Vb(3,"p"),h.Hc(4,"Use the ContextMenu to create your first action!"),h.Ub(),h.Ub())}function Ze(e,t){if(1&e&&h.Qb(0,"i",23),2&e){var n=h.gc().$implicit;h.nc("nzType",n.icon)}}function Xe(e,t){if(1&e&&h.Qb(0,"fa-icon",24),2&e){var n=h.gc().$implicit;h.nc("icon",n.icon)}}function Ye(e,t){if(1&e&&(h.Vb(0,"div",20),h.Fc(1,Ze,1,1,"i",21),h.Fc(2,Xe,1,1,"fa-icon",22),h.Ub()),2&e){var n=t.$implicit;h.Bb(1),h.nc("ngIf","ant"==n.type),h.Bb(1),h.nc("ngIf","fa"==n.type)}}function et(e,t){if(1&e&&h.Qb(0,"div",25),2&e){var n=h.gc(),i=n.$implicit,o=n.index,r=h.gc();h.nc("nzTooltipTitle",r.GetTerminateStatusText(i,o))}}function tt(e,t){if(1&e&&(h.Tb(0),h.Qb(1,"nz-divider",26),h.Sb()),2&e){var n=t.$implicit;h.Bb(1),h.nc("nzText",n)}}function nt(e,t){if(1&e){var n=h.Wb();h.Tb(0),h.Vb(1,"div",10),h.Vb(2,"div",11),h.dc("click",function(e){h.yc(n);var i=t.$implicit;return h.gc().ClickAction(e,i)})("dblclick",function(){h.yc(n);var e=t.$implicit;return h.gc().openModal(e)})("contextmenu",function(e){h.yc(n);var i=t.$implicit,o=h.gc(),r=h.vc(11);return o.openItemContextMenu(e,r,i)}),h.Vb(3,"div",12),h.Vb(4,"div",13),h.Fc(5,Ye,3,2,"div",14),h.Ub(),h.Vb(6,"div",15),h.Vb(7,"div",16),h.Hc(8),h.Ub(),h.Qb(9,"action-list-details",17),h.Ub(),h.Fc(10,et,1,1,"div",18),h.Ub(),h.Ub(),h.Fc(11,tt,2,1,"ng-container",19),h.Ub(),h.Sb()}if(2&e){var i=t.$implicit,o=t.index,r=h.gc();h.Bb(2),h.Hb("selected",r.IsActionSelected(i))("disabled",!i.Enabled)("afterTerminate",r.IsAfterTerminate(o)),h.Bb(3),h.nc("ngIf",r.prepareIcon(r.GetIcon(i))),h.Bb(3),h.Jc("",i.ActionType," "),h.Bb(1),h.nc("action",i),h.Bb(1),h.nc("ngIf",i.Terminating),h.Bb(1),h.nc("ngIf",r.GetTerminateStatus(i,o))}}function it(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",27),h.Vb(1,"li",28),h.Vb(2,"ul",29),h.Vb(3,"li",30),h.dc("click",function(){return h.yc(n),h.gc().CreateAction("UrlRedirect","bottom")}),h.Qb(4,"i",31),h.Hc(5," UrlRedirect "),h.Ub(),h.Vb(6,"li",30),h.dc("click",function(){return h.yc(n),h.gc().CreateAction("UrlRewrite","bottom")}),h.Qb(7,"i",32),h.Hc(8," UrlRewrite "),h.Ub(),h.Vb(9,"li",30),h.dc("click",function(){return h.yc(n),h.gc().CreateAction("Script","bottom")}),h.Qb(10,"i",33),h.Hc(11," Script "),h.Ub(),h.Ub(),h.Ub(),h.Ub()}}var ot=function(){return["fas","toggle-on"]};function rt(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().SetActionEnabled(e.Single,!0)}),h.Qb(1,"fa-icon",40),h.Hc(2," Enable "),h.Ub()}2&e&&(h.Bb(1),h.nc("icon",h.pc(1,ot)))}var ct=function(){return["fas","toggle-off"]};function at(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().SetActionEnabled(e.Single,!1)}),h.Qb(1,"fa-icon",40),h.Hc(2," Disable "),h.Ub()}2&e&&(h.Bb(1),h.nc("icon",h.pc(1,ct)))}function lt(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().openModal(e.Single)}),h.Qb(1,"i",41),h.Hc(2," Edit "),h.Ub()}}function st(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc(2).$implicit;return h.gc().SetActionTerminate(e.Single,!0)}),h.Qb(1,"db-icon",43),h.Hc(2," Stop processing after Action "),h.Ub()}}function ut(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc(2).$implicit;return h.gc().SetActionTerminate(e.Single,!1)}),h.Qb(1,"db-icon",44),h.Hc(2," Continue processing after Action "),h.Ub()}}function dt(e,t){if(1&e&&(h.Vb(0,"li",42),h.Vb(1,"ul",29),h.Fc(2,st,3,0,"li",34),h.Fc(3,ut,3,0,"li",34),h.Ub(),h.Ub()),2&e){var n=h.gc().$implicit;h.Bb(2),h.nc("ngIf",!1===(null==n.Single?null:n.Single.Terminating)),h.Bb(1),h.nc("ngIf",!0===(null==n.Single?null:n.Single.Terminating))}}function bt(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",45),h.Vb(1,"ul",29),h.Vb(2,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("UrlRedirect","before",e.Single)}),h.Qb(3,"i",31),h.Hc(4," UrlRedirect "),h.Ub(),h.Vb(5,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("UrlRewrite","before",e.Single)}),h.Qb(6,"i",32),h.Hc(7," UrlRewrite "),h.Ub(),h.Vb(8,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("Script","before",e.Single)}),h.Qb(9,"i",33),h.Hc(10," Script "),h.Ub(),h.Ub(),h.Ub()}}function ft(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",46),h.Vb(1,"ul",29),h.Vb(2,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("UrlRedirect","after",e.Single)}),h.Qb(3,"i",31),h.Hc(4," UrlRedirect "),h.Ub(),h.Vb(5,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("UrlRewrite","after",e.Single)}),h.Qb(6,"i",32),h.Hc(7," UrlRewrite "),h.Ub(),h.Vb(8,"li",30),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().CreateAction("Script","after",e.Single)}),h.Qb(9,"i",33),h.Hc(10," Script "),h.Ub(),h.Ub(),h.Ub()}}function ht(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",27),h.Fc(1,rt,3,2,"li",34),h.Fc(2,at,3,2,"li",34),h.Fc(3,lt,3,0,"li",34),h.Fc(4,dt,4,2,"li",35),h.Fc(5,bt,11,0,"li",36),h.Fc(6,ft,11,0,"li",37),h.Qb(7,"li",38),h.Vb(8,"li",30),h.dc("click",function(){h.yc(n);var e=t.$implicit;return h.gc().RemoveActions(e.Selected)}),h.Qb(9,"i",39),h.Hc(10," Remove "),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit;h.Bb(1),h.nc("ngIf",!1===(null==i.Single?null:i.Single.Enabled)),h.Bb(1),h.nc("ngIf",!0===(null==i.Single?null:i.Single.Enabled)),h.Bb(1),h.nc("ngIf",i.Single),h.Bb(1),h.nc("ngIf",i.Single),h.Bb(1),h.nc("ngIf",i.Single),h.Bb(1),h.nc("ngIf",i.Single)}}var pt,gt=function(){return[]},mt=((pt=function(){function e(t,n,i,o,r,c,a,l){var s=this;d(this,e),this.uiService=t,this.modal=n,this.overlay=i,this.viewContainerRef=o,this.cref=r,this.componentFactoryResolver=c,this.actionHelper=a,this.rulesService=l,this.terminateActionIndex=-1,this.actionsSubject$=new v.a(null),this.actions$=this.actionsSubject$.asObservable().pipe(Object(m.a)(function(e){s.terminateActionIndex=e.findIndex(function(e){return e.Enabled&&e.Terminating})})),this.actionsChange=new h.n,this.selectedActions=[],this.registered=[],this.onTouched=function(){}}return u(e,[{key:"actions",get:function(){return this.actionsSubject$.value},set:function(e){e=null==e?void 0:e.sort(function(e,t){return e.Order>t.Order?1:e.Order<t.Order?-1:0}),this.actionsSubject$.next(e)}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.ContextMenu)||void 0===e||e.Close()}},{key:"ngOnInit",value:function(){}},{key:"IsActionSelected",value:function(e){return this.selectedActions.includes(e.Id)}},{key:"setActionSelected",value:function(e,n){this.selectedActions=n?t(new Set([].concat(t(this.selectedActions),[e.Id]))):this.selectedActions.filter(function(t){return t!=e.Id})}},{key:"GetSelectedActions",value:function(){var e=this;return this.actions.filter(function(t){return e.selectedActions.includes(t.Id)})}},{key:"ClickAction",value:function(e,t){var n;if(e.stopPropagation(),null===(n=this.ContextMenu)||void 0===n||n.Close(),e.ctrlKey){var i=this.IsActionSelected(t);this.setActionSelected(t,!i)}else this.selectedActions=[],this.setActionSelected(t,!0)}},{key:"OpenOuterContextMenu",value:function(e,t){var n;e.stopPropagation(),this.selectedActions=[],null===(n=this.ContextMenu)||void 0===n||n.Close(),this.ContextMenu=this.overlay.OpenContextMenu(e,t,this.viewContainerRef,null)}},{key:"ClickOutside",value:function(){this.selectedActions=[]}},{key:"openItemContextMenu",value:function(e,t,n){var i;if(e.stopPropagation(),0==this.selectedActions.length||!this.IsActionSelected(n))if(e.ctrlKey){var o=this.IsActionSelected(n);this.setActionSelected(n,!o)}else this.selectedActions=[],this.setActionSelected(n,!0);null===(i=this.ContextMenu)||void 0===i||i.Close(),this.ContextMenu=this.overlay.OpenContextMenu(e,t,this.viewContainerRef,this.BuildContext())}},{key:"BuildContext",value:function(){var e=this,t=new C;return t.AllItems=this.actions,t.Selected=this.actions.filter(function(t){return e.selectedActions.includes(t.Id)}),t}},{key:"GetIcon",value:function(e){return this.actionHelper.GetIcon(e)}},{key:"prepareIcon",value:function(e){if(!e)return null;if(e.startsWith("fa#")){var t={type:"fa",icon:null};return e=e.substring(3),t.icon=e.includes("|")?e.split("|"):e,t}return{type:"ant",icon:e}}},{key:"CreateAction",value:function(e,n,i){var o=new R;switch(e.toLowerCase()){case"urlredirect":o=new ne;break;case"urlrewrite":o=new _;break;case"script":o=new le}o.Order=this.CalculateOrder(n,i),o.Id=this.getNewActionsId().toString(),this.actions=[].concat(t(this.actions),[o]),this.propagateChange(this.actions)}},{key:"getNewActionsId",value:function(){var e=this.actions.map(function(e){return/^(\-|\+)?([0-9]+|Infinity)$/.test(t=e.Id)?Number(t):NaN;var t}).filter(function(e){return!Number.isNaN(e)}).sort(function(e,t){return t-e});return e&&e.length>0?e[0]+1:0}},{key:"GetNextLastOrder",value:function(){if(!this.actions||0===this.actions.length)return 10;var e=Math.trunc(Math.max.apply(Math,t(this.actions.map(function(e){return e.Order})))+10);return console.log("NEXT",e),e}},{key:"CalculateOrder",value:function(e,t){var n,i=-1;switch(t&&(i=null===(n=this.actions)||void 0===n?void 0:n.findIndex(function(e){return e.Order===t.Order})),e){case"top":return this.actions&&0!=this.actions.length?this.actions[0].Order/2:10;case"before":return 0==i?t.Order/2:t.Order-(t.Order-this.actions[i-1].Order)/2;case"after":return i==this.actions.length-1?this.GetNextLastOrder():t.Order+(this.actions[i+1].Order-t.Order)/2;case"bottom":return this.GetNextLastOrder()}}},{key:"SetActionEnabled",value:function(e,t){this.actions=this.actions.map(function(n){return n==e&&(n.Enabled=t),n}),this.propagateChange(this.actions)}},{key:"SetActionTerminate",value:function(e,t){this.actions=this.actions.map(function(n){return n==e&&(n.Terminating=t),n}),this.propagateChange(this.actions)}},{key:"RemoveActions",value:function(e){var t,n=e.map(function(e){return e.Id});this.actions=this.actions.filter(function(e){return!n.includes(e.Id)}),this.propagateChange(this.actions),null===(t=this.ContextMenu)||void 0===t||t.Close()}},{key:"drop",value:function(e){var n=this.actions[e.previousIndex],i=null;if(e.previousIndex<e.currentIndex?i="forward":e.previousIndex>e.currentIndex&&(i="back"),i){if(console.log(i,this.actions.length),"forward"===i)if(e.currentIndex===this.actions.length-1)console.log("-- 1 --"),n.Order=this.GetNextLastOrder();else{console.log("-- 2 --");var o=this.actions[e.currentIndex];n.Order=(this.actions[e.currentIndex+1].Order-o.Order)/2+o.Order}else if("back"===i)if(0===e.currentIndex)console.log("-- 3 --"),n.Order=this.actions[0].Order/2;else{console.log("-- 4 --");var r=this.actions[e.currentIndex-1];n.Order=(this.actions[e.currentIndex].Order-r.Order)/2+r.Order}Object(x.e)(this.actions,e.previousIndex,e.currentIndex),this.actions=t(this.actions),this.propagateChange(this.actions)}}},{key:"GetTerminateStatus",value:function(e,t){return e.Enabled?this.IsAfterTerminate(t)?null:this.GetTerminateStatusText(e,t):null}},{key:"GetTerminateStatusText",value:function(e,t){var n=this.IsLastExecuted(t);return!e.Terminating&&n?"Continue with next Endpoint Rule":e.Terminating&&n?"Stop processing further Endpoint Rules":e.Terminating&&!n?"Stop processing further Actions / Endpoint Rules":void 0}},{key:"IsAfterTerminate",value:function(e){return-1!=this.terminateActionIndex&&e>this.terminateActionIndex}},{key:"IsLastExecuted",value:function(e){return 0==this.actions.filter(function(t,n){return t.Enabled&&n>e}).length}},{key:"openModal",value:function(e){var n,i=this;switch(null===(n=this.ContextMenu)||void 0===n||n.Close(),Object.assign({},e),e.ActionType){case"UrlRedirect":this.ContextMenu=this.actionHelper.GetModal("UrlRedirect").SetData(e).AddEventHandler("OK",function(n){e.Parameters=n.payload,i.actions=t(i.actions),i.propagateChange(i.actions)}).Open();break;case"UrlRewrite":this.ContextMenu=this.actionHelper.GetModal("UrlRewrite").SetData(e).AddEventHandler("OK",function(n){e.Parameters=n.payload,i.actions=t(i.actions),i.propagateChange(i.actions)}).Open();break;case"Script":this.ContextMenu=this.actionHelper.GetModal("Script").SetData(e).AddEventHandler("OK",function(n){e.Parameters=n.payload,i.actions=t(i.actions),i.propagateChange(i.actions),n.handle.Close()}).AddEventHandler("Save",function(n){e.Parameters=n.payload,i.actions=t(i.actions),i.propagateChange(i.actions),i.rulesService.UpdateAction(e).subscribe()}).Open()}}},{key:"propagateChange",value:function(e){this.actionsChange.emit(e),this.registered.forEach(function(t){t(e)})}},{key:"writeValue",value:function(e){this.actions=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||pt)(h.Pb(p.a),h.Pb(A.b),h.Pb(A.c),h.Pb(h.Q),h.Pb(h.h),h.Pb(h.j),h.Pb(ge),h.Pb(V))},pt.\u0275cmp=h.Jb({type:pt,selectors:[["endpoint-actions-list"]],inputs:{actions:"actions"},outputs:{actionsChange:"actionsChange"},features:[h.Ab([{provide:H.k,useExisting:pt,multi:!0}])],decls:12,vars:7,consts:[["cdkDropList","",1,"outer",2,"flex-grow","1","height","100%",3,"contextmenu","click"],["nullList","cdkDropList"],["cdkDropList","",2,"padding","2px","margin-top","8px","max-height","calc(100% - 30px)","overflow-y","auto",3,"cdkDropListDropped"],["rulesList","cdkDropList"],["style","text-align: center; font-size: 1.3em; font-weight: bold; color: #525e7678; line-height: 1.4em; line-height: 2em; margin: 0px 10px;",4,"ngIf"],[4,"ngFor","ngForOf"],["outerContextMenu",""],["itemContextMenu",""],[2,"text-align","center","font-size","1.3em","font-weight","bold","color","#525e7678","line-height","1.4em","line-height","2em","margin","0px 10px"],[2,"font-size","1.5em"],["cdkDrag","","cdkDragLockAxis","y"],[1,"action-item",3,"click","dblclick","contextmenu"],[2,"display","flex"],["cdkDragHandle","",1,"dragHandle",2,"padding","10px 0px 0px 5px"],["class","title-icon",4,"ngIf"],[2,"padding","5px","flex-grow","1"],[2,"font-size","large","font-weight","bold","color","#292f3b"],[3,"action"],["class","terminate-indicator","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[4,"ngIf"],[1,"title-icon"],["style","font-size: xx-large; width: 40px; text-align: left;","nz-icon","","nzTheme","outline",3,"nzType",4,"ngIf"],["style","font-size: xx-large; width: 40px; text-align: left;","nz-icon","",3,"icon",4,"ngIf"],["nz-icon","","nzTheme","outline",2,"font-size","xx-large","width","40px","text-align","left",3,"nzType"],["nz-icon","",2,"font-size","xx-large","width","40px","text-align","left",3,"icon"],["nz-tooltip","",1,"terminate-indicator",3,"nzTooltipTitle"],["nzDashed","",1,"action-divider",3,"nzText"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-submenu","","nzTitle","Add Action","nzIcon","menu-unfold"],[1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","rollback","nzTheme","outline"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","code","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-submenu","","nzTitle","Options","nzIcon","setting",4,"ngIf"],["nz-submenu","","nzTitle","Add Action Before","nzIcon","up",4,"ngIf"],["nz-submenu","","nzTitle","Add Action After","nzIcon","down",4,"ngIf"],["nz-menu-divider",""],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-icon","",3,"icon"],["nz-icon","","nzType","form","nzTheme","outline"],["nz-submenu","","nzTitle","Options","nzIcon","setting"],["icon","fa#far|stop-circle"],["icon","fa#far|play-circle"],["nz-submenu","","nzTitle","Add Action Before","nzIcon","up"],["nz-submenu","","nzTitle","Add Action After","nzIcon","down"]],template:function(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",0,1),h.dc("contextmenu",function(e){h.yc(n);var i=h.vc(9);return t.OpenOuterContextMenu(e,i)})("click",function(){return t.ClickOutside()}),h.Vb(2,"div",2,3),h.dc("cdkDropListDropped",function(e){return t.drop(e)}),h.Fc(4,qe,5,0,"div",4),h.hc(5,"async"),h.Fc(6,nt,12,11,"ng-container",5),h.hc(7,"async"),h.Ub(),h.Ub(),h.Fc(8,it,12,0,"ng-template",null,6,h.Gc),h.Fc(10,ht,11,6,"ng-template",null,7,h.Gc)}2&e&&(h.Bb(4),h.nc("ngIf",0===(h.ic(5,2,t.actions$)||h.pc(6,gt)).length),h.Bb(2),h.nc("ngForOf",h.ic(7,4,t.actions$)))},directives:[x.c,b.o,b.n,x.a,x.b,We,G.a,L.a,Je.b,ve.d,Ke.a,E.c,E.g,E.e,E.d,me.c],pipes:[b.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.action-item[_ngcontent-%COMP%]{margin-bottom:10px!important;border-radius:0!important;box-shadow:0 0 3px 1px #cecece;background-color:#fff}.action-item.disabled[_ngcontent-%COMP%]{opacity:.6;box-shadow:none;background-color:#e2e2e2}.action-item[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{border-right:1px solid #fff}.action-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.action-item.selected[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{background-color:#292f3b;color:#fff}.action-item[_ngcontent-%COMP%]:hover{background-color:#b2b7c2}.new-rule.ui.button[_ngcontent-%COMP%]{margin:0}.options[_ngcontent-%COMP%]{background-color:grey;height:50px}.list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:inherit!important}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:inherit}.dragHandle[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}.list-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#e0e1e2}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{cursor:inherit}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:inherit}.list-item.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%], .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{border-radius:0!important;background-color:#2f2f2f;color:#f5f5f5}.outer.cdk-drop-list-dragging[_ngcontent-%COMP%] > .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}.context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}.afterTerminate[_ngcontent-%COMP%]{opacity:.3}.terminate-indicator[_ngcontent-%COMP%]{width:8px;background-color:#525e76;border-left:1px solid #fff}.action-item.disabled[_ngcontent-%COMP%]   .terminate-indicator[_ngcontent-%COMP%]{background-color:inherit}.action-item[_ngcontent-%COMP%]:hover   .terminate-indicator[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}"],changeDetection:0}),pt),vt=r("ycP/"),yt=r("XNiG"),xt=r("1G5W");function Ct(e,t){1&e&&(h.Vb(0,"div",5),h.Vb(1,"div",21),h.Vb(2,"nz-form-label",28),h.Hc(3,"PrincipalName"),h.Ub(),h.Vb(4,"nz-form-control"),h.Qb(5,"input",29),h.Ub(),h.Ub(),h.Ub())}function Ot(e,t){1&e&&(h.Vb(0,"nz-form-control"),h.Qb(1,"input",30),h.Ub())}function kt(e,t){1&e&&(h.Vb(0,"nz-form-control"),h.Qb(1,"input",31),h.Ub())}var zt,wt=((zt=function(){function e(t,n){d(this,e),this.fb=t,this.context=n,this.form=t.group({Id:[],PrincipalName:[],Type:["User"],Order:[],AccessMode:["Allow"],BoundToClient:[],Client:[],BoundToSourceAddress:[],SourceAddress:[]})}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.Get("BoundToClient").valueChanges.subscribe(function(t){t?e.Get("Client").enable():e.Get("Client").disable()}),this.Get("BoundToSourceAddress").valueChanges.subscribe(function(t){t?e.Get("SourceAddress").enable():e.Get("SourceAddress").disable()}),this.Get("Type").valueChanges.subscribe(function(t){console.log("Type",t),"Authenticated"==t||"Everyone"==t?e.Get("PrincipalName").disable():e.Get("PrincipalName").enable()}),this.form.patchValue(this.context.data),this.Get("BoundToClient").patchValue(this.Get("Client").value),this.Get("BoundToSourceAddress").patchValue(this.Get("SourceAddress").value)}},{key:"ok",value:function(){this.context.invoke("OK",this.form.value)}},{key:"cancel",value:function(){this.context.handle.Close()}},{key:"Get",value:function(e){return this.form.get(e)}},{key:"IsEnabled",value:function(e){return this.form.get(e).enabled}}]),e}()).\u0275fac=function(e){return new(e||zt)(h.Pb(H.e),h.Pb(A.d))},zt.\u0275cmp=h.Jb({type:zt,selectors:[["ng-component"]],decls:43,vars:5,consts:[[1,"modal-header",2,"padding","10px !important","display","flex","margin-bottom","1px"],[2,"font-size","2em","font-weight","bold","line-height","1.4285em","color","whitesmoke","margin","auto"],[2,"flex-grow","1"],[1,"modal-content"],["nz-form","",2,"width","100%","margin","10px 0px",3,"formGroup"],["nz-row","",2,"margin-bottom","4px"],["nz-col","","nzSpan","10","nzOffset","1"],["nzRequired","","nzFor","Type"],[2,"width","100%"],["formControlName","Type","id","Type",2,"width","100%"],["nzValue","User","nzLabel","User"],["nzValue","Role","nzLabel","Role"],["nzValue","Authenticated","nzLabel","Authenticated"],["nzValue","Everyone","nzLabel","Everyone"],["nz-col","","nzSpan","10","nzOffset","2"],["nzRequired","","nzFor","AccessMode"],["formControlName","AccessMode","id","AccessMode",2,"width","100%"],["nzValue","Allow","nzLabel","Allow"],["nzValue","Deny","nzLabel","Deny"],["nzValue","Ignore","nzLabel","Ignore"],["nz-row","","style","margin-bottom: 4px;",4,"ngIf"],["nz-col","","nzSpan","22","nzOffset","1"],["nz-checkbox","","formControlName","BoundToClient",1,"select-label"],[4,"ngIf"],["formControlName","BoundToSourceAddress","nz-checkbox","",1,"select-label"],[1,"modal-footer",2,"margin-bottom","0px","margin-top","1px","background","#292f3b","padding","2px"],["nz-button","","nzType","default",1,"secondary",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],["nzRequired","","nzFor","PrincipalName"],["nz-input","","formControlName","PrincipalName","id","PrincipalName"],["nz-input","","formControlName","Client","id","Client",2,"width","100%"],["nz-input","","formControlName","SourceAddress","id","SourceAddress",2,"width","100%"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Vb(1,"div",1),h.Hc(2," Permission Rule "),h.Ub(),h.Qb(3,"div",2),h.Qb(4,"div"),h.Ub(),h.Vb(5,"div",3),h.Vb(6,"form",4),h.Vb(7,"div",5),h.Vb(8,"div",6),h.Vb(9,"nz-form-label",7),h.Hc(10,"Type"),h.Ub(),h.Vb(11,"nz-form-control",8),h.Vb(12,"nz-select",9),h.Qb(13,"nz-option",10),h.Qb(14,"nz-option",11),h.Qb(15,"nz-option",12),h.Qb(16,"nz-option",13),h.Ub(),h.Ub(),h.Ub(),h.Vb(17,"div",14),h.Vb(18,"nz-form-label",15),h.Hc(19,"AccessMode"),h.Ub(),h.Vb(20,"nz-form-control",8),h.Vb(21,"nz-select",16),h.Qb(22,"nz-option",17),h.Qb(23,"nz-option",18),h.Qb(24,"nz-option",19),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Fc(25,Ct,6,0,"div",20),h.Vb(26,"div",5),h.Vb(27,"div",21),h.Vb(28,"label",22),h.Hc(29," Bound To Client "),h.Ub(),h.Fc(30,Ot,2,0,"nz-form-control",23),h.Ub(),h.Ub(),h.Vb(31,"div",5),h.Vb(32,"div",21),h.Vb(33,"label",24),h.Hc(34," Bound To SourceAddress "),h.Ub(),h.Fc(35,kt,2,0,"nz-form-control",23),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(36,"div",25),h.Vb(37,"button",26),h.dc("click",function(){return t.cancel()}),h.Hc(38,"Cancel"),h.Ub(),h.Qb(39,"div",2),h.Vb(40,"nz-button-group"),h.Vb(41,"button",27),h.dc("click",function(){return t.ok()}),h.Hc(42,"Submit & Close"),h.Ub(),h.Ub(),h.Ub()),2&e&&(h.Bb(6),h.nc("formGroup",t.form),h.Bb(19),h.nc("ngIf",t.IsEnabled("PrincipalName")),h.Bb(5),h.nc("ngIf",t.IsEnabled("Client")),h.Bb(5),h.nc("ngIf",t.IsEnabled("SourceAddress")),h.Bb(6),h.nc("disabled",!t.form.valid))},directives:[H.r,H.n,K.b,H.h,q.c,q.a,K.d,K.a,se.b,H.m,H.g,se.a,b.o,ie.a,F.a,D.a,G.a,F.b,Z.b,H.d],styles:["[_nghost-%COMP%]{box-shadow:0 0 1px 2px #dedddd;max-width:100%;max-height:100%;background-color:#dedddd}.modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;max-width:100%;max-height:100%}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.select-label[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;height:32px;color:rgba(0,0,0,.85);font-size:14px}"],changeDetection:0}),zt),St=function e(){d(this,e)},Mt=r("gwh1"),Pt=["itemsContextMenu"],It=["viewportContextMenu"],Ut=function(){return["far","plus-square"]};function Vt(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",3),h.Vb(1,"li",4),h.dc("click",function(){return h.yc(n),h.gc().AddRule()}),h.Qb(2,"fa-icon",5),h.Hc(3," Add Rule "),h.Ub(),h.Ub()}2&e&&(h.Bb(2),h.nc("icon",h.pc(1,Ut)))}function At(e,t){if(1&e){var n=h.Wb();h.Vb(0,"li",4),h.dc("click",function(){h.yc(n);var e=h.gc().$implicit;return h.gc().RemoveClaim(e.SelectedData)}),h.Qb(1,"i",8),h.Hc(2," Delete "),h.Ub()}}function Rt(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ul",3),h.Vb(1,"li",4),h.dc("click",function(){return h.yc(n),h.gc().AddRule()}),h.Qb(2,"fa-icon",5),h.Hc(3," Add Rule "),h.Ub(),h.Vb(4,"li",4),h.dc("click",function(){h.yc(n);var e=t.$implicit;return h.gc().OpenEditVariableModal(e.First)}),h.Qb(5,"i",6),h.Hc(6," Edit Rule "),h.Ub(),h.Fc(7,At,3,0,"li",7),h.Ub()}if(2&e){var i=t.$implicit;h.Bb(2),h.nc("icon",h.pc(2,Ut)),h.Bb(5),h.nc("ngIf",i.Any)}}var Tt,_t=((Tt=function(){function e(t,n,i){var o=this;d(this,e),this.overlay=t,this.viewContainerRef=n,this.modal=i,this._entries=[],this._disabled=!1,this.entriesChange=new h.n,this.grid=(new vt.d).SetColumns(function(e){return e.Default("Type").SetInitialWidth(300,!0).Set(function(e){return e.rowDrag=!0}).Sortable(!1)},function(e){return e.Default("PrincipalName").Sortable(!1)},function(e){return e.Default("AccessMode").Sortable(!1)},function(e){return e.Default("Client").Sortable(!1)},function(e){return e.Default("SourceAddress").Sortable(!1)}).WithRowSelection("multiple").SetGridOptions({onRowDragMove:function(e){return o.onRowDragMove(e)},onRowDragEnd:function(e){return o.dragEnd(e)},onRowDragLeave:function(e){return o.onRowDragLeave(e)}}).WithFullRowEditType().WithShiftResizeMode().OnDataUpdate(function(e){return o.propagateChange(e)}).OnCellContextMenu(function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new vt.a(e.api,e.event);o.contextMenu=o.overlay.OpenContextMenu(e.event,o.itemsContextMenu,o.viewContainerRef,n)}).OnViewPortContextMenu(function(e,t){t.deselectAll();var n=new vt.a(t,e);o.contextMenu=o.overlay.OpenContextMenu(e,o.viewportContextMenu,o.viewContainerRef,n)}).OnRowDoubleClicked(function(e){o.OpenEditVariableModal(e.data)}).StopEditingWhenGridLosesFocus().OnGridSizeChange(function(e){return e.api.sizeColumnsToFit()}).OnViewPortClick(function(e,t){t.deselectAll()}),this.registered=[],this.onTouched=function(){}}return u(e,[{key:"entries",get:function(){return this._entries},set:function(e){var t,n=e||[];0==n.length&&(n=[]),this._entries=n,null===(t=this.grid)||void 0===t||t.SetData(this._entries)}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}},{key:"AddRule",value:function(){this.contextMenu.Close(),this.OpenEditVariableModal(null)}},{key:"OpenEditVariableModal",value:function(e){var n=this,i=null==e;e=null!=e?e:new St,this.modal.FromComponent(wt).SetData(e).SetModalOptions({overlayConfig:{minWidth:500}}).AddEventHandler("OK",function(e){i?(e.payload.Order=n.GetNextLastOrder(),n.entries=[].concat(t(n.entries),[e.payload])):n.entries=n.entries.map(function(t){return t.Id==e.payload.Id&&(t.AccessMode=e.payload.AccessMode,t.Client=e.payload.Client,t.PrincipalName=e.payload.PrincipalName,t.SourceAddress=e.payload.SourceAddress,t.Type=e.payload.Type),t}),e.handle.Close()}).Open()}},{key:"RemoveClaim",value:function(e){this.entries=this.entries.filter(function(t){return!e.includes(t)}),this.contextMenu.Close()}},{key:"onRowDragMove",value:function(e){var t=this;function n(e,t,n){var i=e[t];e.splice(t,1),e.splice(n,0,i)}this.moveItem$||(this.moveItem$=new yt.a,this.cancelMoveItem$=new yt.a,this.dragStartingIndex=this.entries.indexOf(e.node.data),this.dragItem=e.node.data,this.moveItem$.pipe(Object(xt.a)(this.cancelMoveItem$)).subscribe(function(e){var i=e.node,o=e.overNode;if(i!==o){var r=null==o?void 0:o.data,c=t.entries.indexOf(i.data),a=r?t.entries.indexOf(r):t.entries.length-1,l=t.entries.slice();n(l,c,a),t.entries=l}},function(e){return console.log("Error",e)},function(){var e=t.entries.indexOf(t.dragItem),i=t.entries.slice();n(i,e,t.dragStartingIndex),t.entries=i,t.moveItem$=null,t.cancelMoveItem$=null,t.dragStartingIndex=null,t.dragItem=null})),this.moveItem$.next(e)}},{key:"onRowDragLeave",value:function(e){var t;null===(t=this.cancelMoveItem$)||void 0===t||t.next(!0)}},{key:"GetNextLastOrder",value:function(){if(!this.entries||0===this.entries.length)return 10;var e=Math.trunc(Math.max.apply(Math,t(this.entries.map(function(e){return e.Order})))+10);return console.log("NEXT",e),e}},{key:"dragEnd",value:function(e){var t=this.entries.indexOf(e.node.data);if(t==this.dragStartingIndex)console.log("Gleich");else if(t==this.entries.length-1)this.setOrder(this.dragItem,this.GetNextLastOrder());else if(0==t)this.entries.length>1&&(t=this.entries[1].Order/2),this.setOrder(this.dragItem,t);else{console.log("Dazwischen");var n=this.entries[t-1].Order;this.setOrder(this.dragItem,(this.entries[t+1].Order-n)/2+n)}this.moveItem$=null,this.cancelMoveItem$=null,this.dragStartingIndex=null,this.dragItem=null}},{key:"setOrder",value:function(e,n){e.Order=n,this.entries=t(this.entries)}},{key:"propagateChange",value:function(e){this.entriesChange.emit(e),this.registered.forEach(function(t){t(e)})}},{key:"writeValue",value:function(e){this.entries=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}}]),e}()).\u0275fac=function(e){return new(e||Tt)(h.Pb(A.c),h.Pb(h.Q),h.Pb(A.b))},Tt.\u0275cmp=h.Jb({type:Tt,selectors:[["permissions-manager"]],viewQuery:function(e,t){var n;1&e&&(h.Lc(Pt,1),h.Lc(It,1)),2&e&&(h.uc(n=h.ec())&&(t.itemsContextMenu=n.first),h.uc(n=h.ec())&&(t.viewportContextMenu=n.first))},inputs:{entries:"entries",disabled:"disabled"},outputs:{entriesChange:"entriesChange"},features:[h.Ab([{provide:H.k,useExisting:Tt,multi:!0}])],decls:5,vars:1,consts:[[1,"ag-theme-balham","no-scrollbar",2,"flex-grow","1",3,"dbGrid"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-icon","","nzType","form","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(h.Qb(0,"ag-grid-angular",0),h.Fc(1,Vt,4,2,"ng-template",null,1,h.Gc),h.Fc(3,Rt,8,3,"ng-template",null,2,h.Gc)),2&e&&h.nc("dbGrid",t.grid)},directives:[Mt.a,vt.b,E.c,G.a,E.e,Je.b,L.a,b.o],styles:["[_nghost-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer;min-height:32px}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}.editable-row[_ngcontent-%COMP%]{height:49px}nz-table[_ngcontent-%COMP%]{flex-grow:1}"]}),Tt);function Ht(e,t){1&e&&(h.Qb(0,"i",35),h.Hc(1,"Basic "))}function Bt(e,t){1&e&&(h.Vb(0,"span"),h.Hc(1,"Enabled"),h.Ub())}function Ft(e,t){1&e&&(h.Vb(0,"span"),h.Hc(1,"Disabled"),h.Ub())}function Dt(e,t){1&e&&(h.Qb(0,"i",36),h.Hc(1,"Actions"))}function Gt(e,t){1&e&&(h.Qb(0,"db-icon",37),h.Hc(1,"Permissions"))}function Qt(e,t){1&e&&(h.Qb(0,"i",40),h.Hc(1,"Debug"))}function Lt(e,t){if(1&e&&(h.Vb(0,"nz-tab",3),h.Fc(1,Qt,2,0,"ng-template",null,38,h.Gc),h.Vb(3,"div",39),h.Vb(4,"pre"),h.Hc(5),h.hc(6,"json"),h.Ub(),h.Ub(),h.Ub()),2&e){var n=h.vc(2),i=h.gc(2);h.nc("nzTitle",n),h.Bb(5),h.Ic(h.ic(6,2,i.form.value))}}var Et=function(){return{inkBar:!0,tabPane:!1}},$t=function(){return[","]};function Nt(e,t){if(1&e){var n=h.Wb();h.Tb(0),h.Vb(1,"form",1),h.Vb(2,"nz-tabset",2),h.dc("nzSelectChange",function(e){return h.yc(n),h.gc().tabChanged(e)}),h.Vb(3,"nz-tab",3),h.Fc(4,Ht,2,0,"ng-template",null,4,h.Gc),h.Vb(6,"div",5),h.Vb(7,"div",6),h.Vb(8,"nz-form-label",7),h.Hc(9,"Name"),h.Ub(),h.Vb(10,"nz-form-control"),h.Qb(11,"input",8),h.Ub(),h.Vb(12,"nz-form-label",9),h.Hc(13,"Path"),h.Ub(),h.Vb(14,"nz-form-control"),h.Qb(15,"input",10),h.Ub(),h.Vb(16,"nz-form-label",11),h.Hc(17,"Hostname"),h.Ub(),h.Vb(18,"nz-form-control"),h.Qb(19,"input",12),h.Ub(),h.Ub(),h.Qb(20,"div",13),h.Vb(21,"div",14),h.Vb(22,"nz-collapse",15),h.Vb(23,"nz-collapse-panel",16),h.Vb(24,"label",17),h.Fc(25,Bt,2,0,"span",0),h.Fc(26,Ft,2,0,"span",0),h.Ub(),h.Ub(),h.Vb(27,"nz-collapse-panel",18),h.Vb(28,"nz-select",19),h.Qb(29,"nz-option",20),h.Qb(30,"nz-option",21),h.Ub(),h.Ub(),h.Vb(31,"nz-collapse-panel",22),h.Vb(32,"nz-form-control"),h.Vb(33,"nz-select",23),h.Qb(34,"nz-option",24),h.Qb(35,"nz-option",25),h.Qb(36,"nz-option",26),h.Qb(37,"nz-option",27),h.Qb(38,"nz-option",28),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(39,"nz-tab",3),h.Fc(40,Dt,2,0,"ng-template",null,29,h.Gc),h.Qb(42,"endpoint-actions-list",30),h.Ub(),h.Vb(43,"nz-tab",3),h.Fc(44,Gt,2,0,"ng-template",null,31,h.Gc),h.Vb(46,"div",32),h.Qb(47,"permissions-manager",33),h.Ub(),h.Ub(),h.Fc(48,Lt,7,4,"nz-tab",34),h.hc(49,"async"),h.Ub(),h.Ub(),h.Sb()}if(2&e){var i=h.vc(5),o=h.vc(41),r=h.vc(45),c=h.gc();h.Bb(1),h.nc("formGroup",c.form),h.Bb(1),h.nc("nzAnimated",h.pc(13,Et)),h.Bb(1),h.nc("nzTitle",i),h.Bb(19),h.nc("nzBordered",!0),h.Bb(1),h.nc("nzActive",!0),h.Bb(2),h.nc("ngIf",!!c.form.value.Enabled),h.Bb(1),h.nc("ngIf",!c.form.value.Enabled),h.Bb(7),h.nc("nzTokenSeparators",h.pc(14,$t)),h.Bb(6),h.nc("nzTitle",o),h.Bb(4),h.nc("nzTitle",r),h.Bb(5),h.nc("ngIf",h.ic(49,11,c.showDebugInformations$))}}var jt,Wt,Jt,Kt,qt=[{path:"",component:Te},{path:":id",component:(jt=function(){function t(n,i,o,r){var c=this;d(this,t),this.uiService=n,this.route=i,this.rulesService=o,this.fb=r,this.rule$=Object(_e.a)([this.route.paramMap,this.route.queryParamMap,this.route.fragment]).pipe(Object(k.a)(function(t){var n=e(t,3),i=n[0];return n[1],n[2],c.Id=i.get("id"),c.rulesService.GetRule(c.Id)}),Object(He.a)(),Object(k.a)(function(e){return e.Actions=e.Actions.sort(function(e,t){return e.Order-t.Order}),e}),Object(m.a)(function(e){var t;c.BaseRule||(c.BaseRule=e),c.uiService.Set(function(t){t.Header.Title="Endpoint Rule",t.Header.SubTitle=e.Name,t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button2.Visible=!0}),e.Permissions=null!==(t=e.Permissions)&&void 0!==t?t:[],console.log(e),c.form.patchValue(e)})),this.showDebugInformations$=this.uiService.showDebugInformations$,this.selectedTab=new v.a(0),this.uiService.Set(function(e){e.Footer.Button1.Disabled=!0,e.Footer.Button2.Disabled=!0,e.Footer.Button1.OnClick=function(){c.save()},e.Footer.Button2.Text="Reset",e.Footer.Button2.OnClick=function(){c.form.reset(c.BaseRule)},e.Footer.Show=!0}),this.form=this.fb.group({Id:[null],Name:[null,H.q.required],Scheme:[],Hostname:[],Path:[],Actions:[[]],HttpMethods:[[]],Permissions:[[]],Order:[],Enabled:[!1]})}return u(t,[{key:"ngOnInit",value:function(){var e=this;this.form.get("Name").valueChanges.subscribe(function(t){return e.uiService.Set(function(e){return e.Header.SubTitle=t})}),this.form.valueChanges.subscribe(function(t){e.form.valid?e.SetButtonStatus(t):e.uiService.Set(function(e){e.Footer.Button1.Disabled=!0,e.Footer.Button1.Text="Form not valid!"})})}},{key:"GeneratePatchDocument",value:function(e,t){return e=null!=e?e:this.BaseRule,t=null!=t?t:this.form.value,Object(Be.a)(e,t)}},{key:"save",value:function(){var e,t=this,n=this.form.value;null===(e=n.Actions)||void 0===e||e.forEach(function(e){var t,n=/^(\-|\+)?([0-9]+|Infinity)$/.test(t=e.Id)?Number(t):NaN;Number.isNaN(n)||(e.Id=null)}),console.log(n),this.rulesService.Update(this.Id,n).pipe(Object(m.a)(function(){t.BaseRule=t.form.value,t.SetButtonStatus(t.BaseRule)})).subscribe()}},{key:"SetButtonStatus",value:function(e){var t=this.GeneratePatchDocument(this.BaseRule,e);this.uiService.Set(t.length>0?function(e){e.Footer.Button1.Disabled=!1,e.Footer.Button1.Text="Save Changes",e.Footer.Button2.Disabled=!1}:function(e){e.Footer.Button1.Disabled=!0,e.Footer.Button1.Text="No Changes",e.Footer.Button2.Disabled=!0})}},{key:"tabChanged",value:function(e){var t;this.selectedTab.next(null!==(t=e.index)&&void 0!==t?t:0)}},{key:"isNotSelected",value:function(e){return-1===this.form.value.HttpMethods.indexOf(e)}},{key:"BaseRule",get:function(){return this._baseRule},set:function(e){this._baseRule=JSON.parse(JSON.stringify(e))}}]),t}(),jt.\u0275fac=function(e){return new(e||jt)(h.Pb(p.a),h.Pb(f.a),h.Pb(V),h.Pb(H.e))},jt.\u0275cmp=h.Jb({type:jt,selectors:[["endpoint-rule-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated","nzSelectChange"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nzRequired","","nzFor","Name"],["nz-input","","formControlName","Name","id","Name",2,"width","100%"],["nzRequired","","nzFor","Path"],["nz-input","","formControlName","Path","id","Path",2,"width","100%"],["nzFor","Hostname"],["nz-input","","formControlName","Hostname","id","Hostname","placeHolder","*",2,"width","100%"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],["nzAccordion","",3,"nzBordered"],["nzHeader","Options",3,"nzActive"],["nz-checkbox","","formControlName","Enabled"],["nzHeader","Schemes"],["nzMode","multiple","nzPlaceHolder","all Schemes allowed","formControlName","Scheme","nzMode","tags",2,"width","100%"],["nzLabel","Http","nzValue","http"],["nzLabel","Https","nzValue","https"],["nzHeader","Http Methods"],["nzMode","multiple","nzPlaceHolder","all Methods allowed","formControlName","HttpMethods","nzMode","tags",2,"width","100%",3,"nzTokenSeparators"],["nzLabel","Get","nzValue","Get"],["nzLabel","Post","nzValue","Post"],["nzLabel","Put","nzValue","Put"],["nzLabel","Delete","nzValue","Delete"],["nzLabel","Patch","nzValue","Patch"],["ActionsTitle",""],["formControlName","Actions"],["PermissionsTitle",""],[2,"height","100%","display","flex","padding","8px 0px"],["formControlName","Permissions"],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["nz-icon","","nzType","ordered-list"],["icon","fa#shield-alt"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"]],template:function(e,t){1&e&&(h.Fc(0,Nt,50,15,"ng-container",0),h.hc(1,"async")),2&e&&h.nc("ngIf",h.ic(1,1,t.rule$))},directives:[b.o,H.r,H.n,K.b,H.h,Fe.c,Fe.a,q.a,K.d,K.a,Z.b,H.d,H.m,H.g,De.a,De.c,ie.a,se.b,se.a,mt,_t,G.a,L.a,me.c],pipes:[b.b,b.i],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden}"]}),jt)}],Zt=((Wt=function e(){d(this,e)}).\u0275mod=h.Nb({type:Wt}),Wt.\u0275inj=h.Mb({factory:function(e){return new(e||Wt)},imports:[[f.l.forChild(qt)],f.l]}),Wt),Xt=r("FG6W"),Yt=((Kt=function e(){d(this,e)}).\u0275mod=h.Nb({type:Kt}),Kt.\u0275inj=h.Mb({factory:function(e){return new(e||Kt)},imports:[[b.c,H.p,se.c,Xt.a]]}),Kt),en=((Jt=function e(){d(this,e)}).\u0275mod=h.Nb({type:Jt}),Jt.\u0275inj=h.Mb({factory:function(e){return new(e||Jt)},imports:[[b.c,H.p,Zt,x.d,Xt.a,Yt]]}),Jt)}}])}();